<!DOCTYPE html>
<html lang="de">
    <head>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <title>SOAP-Webservices</title>

        <link rel="shortcut icon" href="../../favicon.svg" />
        <link rel="stylesheet" href="../../style.css" />
        <script src="../../learning-slides.bundle.js"></script>
    </head>
    <body class="slides invisible" data-title="SOAP-Webservices" tabindex="0">
        <header>
            <h2>Inhaltsverzeichnis</h2>
            <p>
                Nicht jede Webanwendung generiert zwangsl√§ufig HTML-Code zur Anzeige im Browser.
                Manche Anwendungen stellen auch nur ein paar Funktionen zum entfernten Aufruf
                durch andere Anwendungen zur Verf√ºgung. Wie das geht, erf√§hrst du hier.
            </p>
        </header>

        <!--
            ========================
            LERNZIELE DIESER EINHEIT
            ========================
        -->
        <section data-chapter data-background-color="rgb(210,190,210)">
            <h1>Lernziele dieser Einheit</h1>
            <article>
                <h3>Nach Abschluss dieser Einheit kannst du ‚Ä¶</h3>
                <ul>
                    <li>
                        Die Idee hinter <span class="dhbw-lightblue font-weight-bold">SOAP-Webservices</span> und
                        <span class="dhbw-lightblue font-weight-bold">typische Anwendungsf√§lle</span> beschreiben.
                    </li>
                    <li>
                        <span class="dhbw-lightblue font-weight-bold">SOAP-Nachrichten</span> interpretieren sowie eigene SOAP-Anfragen formulieren.
                    </li>
                    <li>
                        Erkl√§ren, was eine <span class="dhbw-lightblue font-weight-bold">WSDL-Beschreibung</span> ist und wozu sie ben√∂tigt wird.
                    </li>
                    <li>
                        WSDL-Dateien in <span class="dhbw-lightblue font-weight-bold">SoapUI</span> importieren und fremde Webservices damit testen.
                    </li>
                    <li>
                        Eigene SOAP-Webservices mit den <span class="dhbw-lightblue font-weight-bold">JAX-WS-Annotationen</span> von Java entwickeln.
                    </li>
                    <li>
                        Jakarta-EE-Anwendungen mit SOAP-Webservices <span class="dhbw-lightblue font-weight-bold">√ºbersichtlich und wartbar</span> strukturieren.
                    </li>
                    <li>
                        Entfernte Webservices mit JAX-WS aus Java heraus aufrufen.
                    </li>
                    <li>
                        Netbeans zur Generierung der f√ºr den Aufruf ben√∂tigten <span class="dhbw-lightblue font-weight-bold">Webservice-Stubs</span> verwenden.
                    </li>
                </ul>
                <span style="font-size: 240px; color: white;" class="dhbw-text-shadow" >üèÅ</span>
            </article>
            <aside>
                <p>
                    Seitdem wir uns das erste mal in Webprogrammierung mit Java auf dem Server besch√§ftigt haben, ist viel passiert.
                    Inzwischen k√∂nnen wir nicht nur einfache Webseiten serverseitig mit Java generieren, sondern wir k√∂nnen ganze
                    Webanwendungen schreiben, die einer logischen Struktur aus Datenhaltung, Serviceklassen und Weboberfl√§che entsprechen.
                    Doch nicht immer muss eine Jakarta-EE-Anwendung eine serverseitige Weboberfl√§che beinhalten, manchmal will man
                    stattdessen einfach nur die Funktionen einer EJB f√ºr entfernte Clients aufrufbar machen. Oder man will, obwohl
                    eine Anwendung eine Weboberfl√§che besitzt, auch anderen Clients die M√∂glichkeit geben, dieselben Backend-Services
                    zu nutzen.
                </p>
                <p>
                    Das Mittel der Wahl sind hier oftmals Webservices, da sie weder ein bestimmtes Betriebssystem noch eine
                    bestimmte Programmiersprache voraussetzen. Clients und Server k√∂nnen dadurch in jeder beliebigen Sprache
                    f√ºr jedes beliebige Betriebssystem programmiert werden, wodurch die gesamte Architektur sehr flexibel wird.
                    Zus√§tzlich k√∂nnen sie aus fast jedem Intranet heraus aufgerufen werden, da Webservices auf HTTP basieren
                    (daher der Name) und somit von den meisten Firewalls durchgelassen werden. Dementsprechend hoch ist also
                    ihre Verbreitung, insbesondere gesch√§ftlichen Umfeld, wo h√§ufig restriktive Firewalls anzutreffen sind.
                </p>
                <p>
                    In diesem Kapitel schauen wir uns ausschlie√ülich SOAP-Webservices an, bevor wir im n√§chsten Kapitel auch
                    REST-Webservices kennenlernen werden. Du erf√§hrst daher, was ein SOAP-Webservice ist, wie der technisch
                    funktioniert und wie du sowohl eigene Webservices entwickeln als auch entfernte Webservices mit Java
                    aufrufen kannst. Hierbei zeigen wir dir auch, warum jeder SOAP-Webservice immer eine sogenannte WSDL
                    beinhaltet und wie er damit in SoapUI getestet und der Quellcode f√ºr seinen Aufruf generiert werden kann.
                </p>
            </aside>
        </section>

        <!--
            ========================
            Kurzvorstellung von SOAP
            ========================
        -->
        <section data-chapter data-background-image="../../trennfolie.jpg">
            <h1>Kurzvorstellung von SOAP</h1>
            <article>
                <small>
                    <small>
                        Bildnachweis:
                        <a href="https://pixabay.com/en/adult-break-business-caucasian-2398561/" target="_blank">Pixabay: rawpixel</a>
                    </small>
                </small>
            </article>
        </section>

        <section>
            <h1>HTTP + XML = SOAP</h1>
            <article>
                <table style="margin-bottom: 1em;">
                    <tr>
                        <td style="padding-right: 0.5em">
                            üåé
                        </td>
                        <td>
                            SOAP-Webservices erlauben Clients den entfernten Aufruf von Methoden eines Servers.
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-right: 0.5em">
                            üåç
                        </td>
                        <td>
                            HTTP dient dabei als plattformunabh√§ngiges Transportprotokoll f√ºr XML-SOAP-Nachrichten.
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-right: 0.5em">
                            üåè
                        </td>
                        <td>
                            √úblicherweise wird es in Unternehmen zur Entwicklung betriebswirtschaftlicher Anwendungen genutzt.
                        </td>
                    </tr>
                </table>

                <h2>Typische Anwendungsf√§lle</h2>

                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "usecases-b2b-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#usecases-b2b"
                                role          = "tab"
                                aria-controls = "usecases-b2b"
                                aria-expanded = "true"
                            >
                                Business-To-Business
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "usecases-integration-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#usecases-integration"
                                role          = "tab"
                                aria-controls = "usecases-integration"
                            >
                                Systemintegration
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Business-To-Business -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "usecases-b2b"
                            role            = "tabpanel"
                            aria-labelledby = "usecases-b2b-tab"
                        >
                            <p>
                                Sehr h√§ufig werden Webservices dazu genutzt, B2B-Szenarios zwischen mehreren Unternehmen abzubilden, wof√ºr ein Unternehmen
                                Webservices bietet, die von seinen Kunden und Lieferanten aufgerufen werden k√∂nnen. Dadurch k√∂nnen die Systeme untereinander
                                Daten austauschen, um manuelle Prozessschritte zu eliminieren. Die Abbildung zeigt zum Beispiel, wie ein Gro√ükunde üêï eine
                                Bestellung bei einem H√§ndler aufgibt, was wiederum zur automatischen Erteilung eines Produktions- und eines Lieferauftrags
                                bei zwei weiteren Unternehmen f√ºhrt.
                            </p>
                            <img src="usecase-b2b.svg" alt="Systemintegration zwischen Unternehmen" class="d-block" style="width: 100%;" />
                            <p>
                                <small>
                                    <small>
                                        Bildnachweis:
                                        <a href="https://pixabay.com/de/hund-laptop-computer-gl%C3%A4ser-2983021/" target="_blank">Pixabay: Kaz</a>
                                    </small>
                                </small>
                            </p>
                        </div>
                        <!-- Systemintegration -->
                        <div
                            class           = "tab-pane fade"
                            id              = "usecases-integration"
                            role            = "tabpanel"
                            aria-labelledby = "usecases-integration-tab"
                        >
                            <p>
                                Innerhalb eines Unternehmens k√∂nnen Webservices genutzt werden, um heterogene Anwendungen √ºber einen Integrationsserver
                                miteinander zu verbinden. √úblicherweise bieten die Anwendungen, die meistens von unterschiedlichen Herstellern stammen und
                                nicht miteinander kompatibel sind, hierf√ºr eine Webservice-Schnittstelle, die durch den Integrationsserver bedient
                                werden kann. Zus√§tzlich k√∂nnen auf dem Server weitere, durch die Anwendungen aufgerufene Webservices definiert werden,
                                wobei der Server die Aufrufe umwandelt und dann entsprechend weiterleitet. Manche Server besitzen dar√ºber hinaus sogar
                                eine Regel-Engine, mit der automatisch ablaufende Gesch√§ftsprozesse gesteuert werden k√∂nnen.
                            </p>
                            <img src="usecase-integration.svg" alt="Integration heterogener Anwendungen" class="d-block" style="width: 100%;" />
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <p>
                    Bisher haben wir HTTP nur als √úbertragungsprotokoll f√ºr HTML-Seiten, die ein Browser von einem Webserver abrufen kann, kennengelernt.
                    Im Zusammenhang mit EJBs kann HTTP aber auch etwas ganz anderes: Die Methoden einer <b>Stateless Session Bean</b> durch entfernte Clients
                    aufrufbar machen, und zwar auch dann (oder, besser gesagt, gerade dann), wenn diese Clients keine Browser sondern einfach irgendwelche
                    Programme sind. Man spricht dann von einem <b>Webservice</b> aufgrund Webtechnologien, die hierf√ºr genutzt werden. Die Idee dahinter hat
                    eigentlich gar nichts mit Java zu tun, da sich Webservices mit nahezu jeder Sprache sowohl erstellen als auch aufrufen lassen. Jedoch
                    geht dies mit Java besonders einfach.
                </p>
                <p>
                    Die Webservices, um dies hier geht, nennen sich <a href="https://de.wikipedia.org/wiki/SOAP" target="_blank">SOAP-Webservices</a>,
                    was urspr√ºnglich mal f√ºr <b>Simple Object Access Protocol</b> stand. Doch wie bei vielen
                    <a href="https://en.wikipedia.org/wiki/History_of_Microsoft" target="_blank">von Microsoft erfundenen</a> Dingen, ist das Protokoll
                    weder einfach noch objektorientiert, üòâ so dass SOAP heute nur noch f√ºr SOAP steht. ‚ú® Denn rund um SOAP sind im Laufe der Jahre
                    viele verwandte Standards entstanden, die zwar allesamt reale Probleme, wie zum Beispiel die Signierung und Verschl√ºsselung der
                    √ºbertragenen Daten, l√∂sen, daf√ºr aber auch sehr komplex sind. Wir beg√ºngen uns an dieser Stelle daher nur mit den Grundlagen, bei
                    denen es immer auf folgendes hinausl√§uft:
                </p>
                <ul>
                    <li>
                        Ein Server stellt Objekte f√ºr entfernte Methodenaufrufe zur Verf√ºgung.
                    </li>
                    <li>
                        Als Transportprotokoll kommt dabei HTTP oder HTTPS¬π zum Einsatz.
                    </li>
                    <li>
                        Methodenaufruf und Ergebnis werden im SOAP-XML-Format kodiert.
                    </li>
                </ul>
                <p>
                    Das W3C definiert <a href="https://www.w3.org/TR/ws-arch/#whatis" target="_blank">Webservices</a> dementsprechend so:
                    <i>
                        Ein Webservices ist ein Softwaresystem, das f√ºr die interoperable Maschine-Zu-Maschine-Interaktion √ºber ein Netzwerk entworfen wurde.
                        [‚Ä¶] Andere Systeme interagieren mit dem Webservice [‚Ä¶] durch SOAP-Nachrichten, die typischerweise via HTTP mit einer XML-Serialisierung
                        und anderen Webstandards √ºbertragen werden.
                    </i>
                </p>
                <p>
                    Aufgrund seines Alters (SOAP wurde bereits 1999 erfunden), der prinzipbedingten Plattformunabh√§ngigkeit, der vielen angrenzenden Standards
                    sowie der ausgereiften Frameworks und Entwicklungswerkzeuge ist SOAP heute bei vielen Unternehmen im Einsatz. Insbesondere bei verteilten
                    Business-To-Business-Anwendungen ist SOAP das Mittel der Wahl und wird erst seit Kurzem vermehrt durch REST¬≤ abgel√∂st. Typische Use Cases
                    sind daher die auf der Folie gezeigten, wenn zum Beispiel die Lieferkette zwischen zwei Unternehmen üöö elektronisch abgebildet oder einfach
                    nur mehrere, voneinander unabh√§ngige Anwendungen √ºber einen Integrationsserver miteinander verbunden werden sollen.
                </p>
                <p>
                    <small>
                        ¬π HTTP √ºber eine verschl√ºsselte Verbindung
                        <br />
                        ¬≤ Schauen wir uns im n√§chsten Kapitel an
                    </small>
                </p>
            </aside>
        </section>

        <section>
            <h1>Technische Hintergr√ºnde zu SOAP</h1>
            <article>
                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "details-transfer-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#details-transfer"
                                role          = "tab"
                                aria-controls = "details-transfer"
                            >
                                HTTP und XML-Format
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "details-wsdl-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#details-wsdl"
                                role          = "tab"
                                aria-controls = "details-wsdl"
                                aria-expanded = "true"
                            >
                                WSDL-Beschreibung
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- HTTP und XML-Format -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "details-transfer"
                            role            = "tabpanel"
                            aria-labelledby = "details-transfer-tab"
                        >
                            <p>
                                Anfrage und Antwort werden im SOAP-XML-Format kodiert und durch einen einfachen HTTP-Aufruf √ºbertragen. Die aufgerufene URL, sowie
                                der genaue Inhalte der XML-Nachrichten ergibt sich aus der WSDL-Beschreibung. Der Aufruf erfolgt immer als POST-Anfrage.
                            </p>
                            <img src="beispiel-request.svg" alt="" class="d-block" style="width: 100%; margin-bottom: 3em;" />
                            <img src="beispiel-response.svg" alt="" class="d-block" style="width: 100%;" />
                        </div>
                        <!-- WSDL-Beschreibung -->
                        <div
                            class           = "tab-pane fade"
                            id              = "details-wsdl"
                            role            = "tabpanel"
                            aria-labelledby = "details-wsdl-tab"
                        >
                            <p>
                                Jeder SOAP-Webservice besitzt eine <span class="dhbw-lightblue font-weight-bold">WSDL-Beschreibung</span>, in der alle aufrufbaren
                                Operationen, die hierbei ausgetauschten XML-Nachrichten, das Transportprotokoll und die URL in einem maschinenlesbaren XML-Format
                                definiert sind. Sie besitzt ungef√§hr folgenden Aufbau:
                            </p>
                            <table style="margin-bottom: 1em">
                                <tr>
                                    <td style="padding-right: 0.5em">
                                        üìÉ
                                    </td>
                                    <td>
                                        Typdefinitionen der ausgetauschten XML-Daten mit <a href="https://de.wikipedia.org/wiki/XML_Schema" target="_blank">XML Schema</a>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding-right: 0.5em">
                                        üìÉ
                                    </td>
                                    <td>
                                        Definition der aufrufbaren <span class="dhbw-lightblue font-weight-bold">Operationen</span> (in Java w√ºrde man ‚ÄûMethoden‚Äù sagen)
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding-right: 0.5em">
                                        üìÉ
                                    </td>
                                    <td>
                                        Zusammenfassung mehrerer Operationen zu einem <span class="dhbw-lightblue font-weight-bold">Interface</span> (WSDL 2.0) bzw. <span class="dhbw-lightblue font-weight-bold">Port Type</span> (WSDL 1.1)
                                    </td>
                                </tr>
                                <tr>
                                    <td style="padding-right: 0.5em">
                                        üìÉ
                                    </td>
                                    <td>
                                        Definition des <span class="dhbw-lightblue font-weight-bold">Bindings</span> mit dem Transportprotokoll, URL und Aufrufsemantik des Webservices
                                    </td>
                                </tr>
                            </table>
                            <p>
                                Das nachfolgende Beispiel zeigt die WSDL-1.1-Beschreibung f√ºr einen <code>BuchladenWebservice</code>
                                mit <code>sucheNachStichwort</code> als einziger Operation:
                            </p>
                            <source-code language="xml">
                                &lt;definitions name="BuchladenWebservice"
                                        xmlns:soap="http://schemas.xmlsoap.org/wsdl/soap/"
                                        xmlns:xs="http://www.w3.org/2001/XMLSchema"
                                        xmlns="http://schemas.xmlsoap.org/wsdl/"&gt;

                                    &lt;!-- Zun√§chst werden mit XML Schema alle XML-Strukturen definiert, die    --&gt;
                                    &lt;!-- in irgend einer Form zwischen Client und Server ausgetauscht werden. --&gt;
                                    &lt;!-- Dabei muss es f√ºr jede Operation mindestens eine Anfrage- und eine   --&gt;
                                    &lt;!-- Antwortstruktur geben. Dar√ºber hinaus k√∂nnen aber noch beliebige     --&gt;
                                    &lt;!-- weitere Strukturen definiert werden.                                 --&gt;
                                    &lt;types&gt;
                                        &lt;xs:schema&gt;
                                            &lt;!-- Anfrage f√ºr ‚ÄûsucheNachStichwort‚Äù --&gt;
                                            &lt;element name="sucheNachStichwort"&gt; ‚Ä¶ &lt;/element&gt;
                                            &lt;!-- Antwort f√ºr ‚ÄûsucheNachStichwort‚Äù --&gt;
                                            &lt;element name="sucheNachStichwortResponse"&gt; ‚Ä¶ &lt;/element&gt;
                                            &lt;!-- Struktur f√ºr ein einzelnes Buch --&gt;
                                            &lt;element name="buch"&gt; ‚Ä¶ &lt;/element&gt;
                                        &lt;/xs:schema&gt;
                                    &lt;/types&gt;

                                    &lt;!-- Anschlie√üend werden f√ºr jede Operation die Anfrage- und die Antwort- --&gt;
                                    &lt;!-- Nachrichten des soap:Body definiert. Die Nachrichten beziehen sich   --&gt;
                                    &lt;!-- dabei auf die Schemadefinitionen von oben.                           --&gt;
                                    &lt;message name="SucheNachStichwortRequestBody"&gt;
                                        &lt;part name="RequestBody" element="sucheNachStichwort"/&gt;
                                    &lt;/message&gt;

                                    &lt;message name="SucheNachStichwortResponseBody"&gt;
                                        &lt;part name="ResponseBody" element="sucheNachStichwortResponse"/&gt;
                                    &lt;/message&gt;

                                    &lt;!-- Darauf aufbauend k√∂nnen die Port Types mit den darin enthaltenen, --&gt;
                                    &lt;!-- aufrufbaren Operationen definiert werden. Jeder Port Type kann    --&gt;
                                    &lt;!-- beliebig viele Operationen beinhalten und es kann auch beliebig   --&gt;
                                    &lt;!-- viele Port Types geben. F√ºr jede Operation wird auf die oben      --&gt;
                                    &lt;!-- definierten XML-Nachrichten verweisen.                            --&gt;
                                    &lt;portType name="BuchSuchePortType"&gt;
                                        &lt;operation name="sucheNachStichwort"&gt;
                                           &lt;input message="tns:SucheNachStichwortRequestBody"/&gt;
                                           &lt;output message="tns:SucheNachStichwortResponseBody"/&gt;
                                        &lt;/operation&gt;
                                    &lt;/portType&gt;

                                    &lt;!-- Als n√§chstes folgt das Binding, das haupts√§chlich HTTP als Protokoll --&gt;
                                    &lt;!-- zur √úbertragung definiert und mit use="literal" festlegt, dass die   --&gt;
                                    &lt;!-- XML-Nachrichten strikt dem XML-Schema entsprechen m√ºssen.            --&gt;
                                    &lt;binding name="BuchSucheBinding" type="tns:BuchSuchePortType"&gt;
                                        &lt;soap:binding style="document" transport="http://schemas.xmlsoap.org/soap/http"/&gt;
                                        &lt;operation name="sucheNachStichwort"&gt;
                                           &lt;soap:operation&gt;
                                           &lt;input&gt;
                                               &lt;soap:body use="literal"/&gt;
                                           &lt;/input&gt;
                                           &lt;output&gt;
                                               &lt;soap:body use="literal"/&gt;
                                           &lt;/output&gt;
                                        &lt;/operation&gt;
                                    &lt;/binding&gt;

                                    &lt;!-- Und schlussendlich die URL zum Aufruf des Webservices. --&gt;
                                    &lt;service name="BuchSucheService"&gt;
                                        &lt;port name="BuchSuchePort" binding="tns:BuchSucheBinding"&gt;
                                            &lt;soap:address location="http://example.com/soap/buchsuche/"/&gt;
                                        &lt;/port&gt;
                                    &lt;/service&gt;
                                &lt;/definitions&gt;
                            </source-code>
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <p>
                    Da der SOAP-Standard üßº unabh√§ngig von Java ‚òï oder irgend einer anderen Sprache erfunden wurde, besitzt er ein paar Besonderheiten, die wir bei der
                    Entwicklung beachten m√ºssen. Deshalb ist es ganz gut, zu verstehen, wie ein SOAP-Webservice funktioniert und welche Daten bei einem Aufruf √ºber
                    die Leitung gehen. Auf dieser Folie schauen wir uns daher die folgenden Sachen an:
                </p>
                <ul>
                    <li>
                        Wie die Methoden eines SOAP-Webservices definiert werden
                    </li>
                    <li>
                        Welche URL ein Webservice besitzt
                    </li>
                    <li>
                        Wie das HTTP-Protokoll beim Aufruf verwendet wird
                    </li>
                    <li>
                        Welchen Aufbau die Anfragen und Antworten besitzen
                    </li>
                    <li>
                        Wie Name, Parameter und R√ºckgabewert der Methoden kodiert werden
                    </li>
                </ul>
                <p>
                    Den Bezug zu Java lassen wir dabei erst einmal au√üen vor. Wir wollen erst verstehen, wie SOAP ganz allgemein funktioniert.
                </p>

                <h2>Nutzung von HTTP und XML</h2>
                <p>
                    Das Grundprinzip hinter SOAP ist eigentlich ganz einfach. Wie der Begriff ‚ÄûWebservice‚Äù bereits andeutet wird dieselbe technische
                    Infrastruktur wie im World Wide Web genutzt, insbesondere HTTP als √úbertragungsprotokoll und XML als Datenformat.
                    Daraus ergibt sich, dass Webservices einem einfachen Request/Response-Verfahren folgen, bei dem der Client eine in XML formulierte
                    Anfrage an den Server schickt und dann auf eine Antwort darauf wartet. Die Anfrage wird dabei bei SOAP immer als POST-Anfrage
                    gesendet. Andere HTTP-Verben kommen nicht zum Einsatz. Zus√§tzlich m√ºssen die √ºbertragenen XML-Daten einem festen Schema mit folgendem,
                    groben Aufbau entsprechen:
                </p>
                <source-code language="xml">
                    &lt;soap:Envelope
                        xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/"
                        ggf. weitere Namensraumdefinitionen
                    &gt;
                        &lt;soap:Header&gt;
                            &lt;!-- Kopfdaten --&gt;
                        &lt;/soap:Header&gt;
                        &lt;soap:Body&gt;
                            &lt;!-- Eigentliche Anfrage oder Antwort --&gt;
                        &lt;/soap:Body&gt;
                    &lt;/soap:Envelope&gt;
                </source-code>
                <p>
                    An oberster Stelle befindet sich also immer ein <src-code language="xml">&lt;Envelope&gt;</src-code>, der einen optionalen
                    <src-code language="xml">&lt;Header&gt;</src-code> sowie einen <src-code language="xml">&lt;Body&gt;</src-code> besitzt.
                    Alle drei Elemente m√ºssen der Namensraum-URL
                    <a href="http://schemas.xmlsoap.org/soap/envelope/" target="_blank">http://schemas.xmlsoap.org/soap/envelope/</a>
                    zugeordnet sein. Was dann inerhalb von <src-code language="xml">&lt;Header&gt;</src-code> und
                    <src-code language="xml">&lt;Body&gt;</src-code> steht, h√§ngt vom Webservice ab. Der eigentliche Methodenaufruf ist allerdings
                    immer im <src-code language="xml">&lt;Body&gt;</src-code> enthalten, w√§hrend der <src-code language="xml">&lt;Header&gt;</src-code>
                    oft nur allgemeine Sachen wie Benutzername und Passwort oder Fehlermeldungen beinhaltet.
                </p>
                <p>
                    Wie du auf der Folie sehen kannst, beinhaltet der <src-code language="xml">&lt;Body&gt;</src-code> immer genau ein XML-Element,
                    das den Namen der aufgerufenen Operation definiert. Innerhalb davon befinden sich dann weitere Elemente f√ºr die √ºbergebenen
                    Parameter bzw. den R√ºckgabewert des Aufrufs.
                </p>



                <h2>Formale Definition</h2>
                <p>
                    Eine Besonderheit von SOAP ist, dass es zu jedem Webservice eine sogenannte WSDL-Beschreibung gibt, in der alle f√ºr den Aufruf des Webservices
                    ben√∂tigten Informationen in einem maschinenlesbaren XML-Format definiert sind. Dementsprechend steht WSDL auch f√ºr <b>Webservice Definition
                    Language</b>. Das Format ist ein wenig kompliziert aufgebaut und nicht so sehr daf√ºr gedacht, von Menschen gelesen oder geschrieben zu werden.
                    Vielmehr dient es dazu, durch Werkzeugprogramme ausgewertet zu werden, um zum Beispiel ein fertiges Codeger√ºst f√ºr Client oder Server zu generieren.
                    Inzwischen gibt es zwei Versionen des WSDL-Standards: <a href="https://www.w3.org/TR/2001/NOTE-wsdl-20010315" target="_blank">WSDL 1.1</a> und
                    <a href="https://www.w3.org/TR/2007/REC-wsdl20-20070626/" target="_blank">WSDL 2.0</a>, viele Frameworks unterst√ºtzen jedoch nur die √§ltere Version,
                    obwohl WSDL 2.0 bereits 2007 spezifiziert wurde und gegen√ºber der Vorversion von 2001 einige Vereinfachungen enth√§lt. üòï Java nutzt daher
                    standardm√§√üig ebenfalls die Version 1.1.
                </p>
                <p>
                    Vereinfacht gesagt besitzt eine WSDL-Datei folgende Inhalte:
                </p>
                <ul>
                    <li>
                        <b>Typdefinitionen:</b> Damit klar ist, welche XML-Daten an den Webservice gesendet werden k√∂nnen und welche XML-Daten er zur√ºckschickt,
                        befindet sich am Anfang der WSDL ein Bereich mit <a href="https://de.wikipedia.org/wiki/XML_Schema" target="_blank">XML-Schema-Definitionen</a>.
                        Hier wird f√ºr jede Methode eine Anfragestruktur und eine Antwortstruktur definiert und festgelegt, welche XML-Elemente sie enthalten.
                    </li>
                    <li>
                        <b>Nachrichtendefinitionen:</b> Als n√§chstes folgt ein Bereich, in dem die Methoden (im SOAP-Jargon ‚ÄûOperationen‚Äù genannt) definiert werden.
                        Hier wird also festgelegt, welche Operationen es gibt, wie sie hei√üen, und welche XML-Schema-Definitionen f√ºr Anfrage und Antwort
                        herangezogen werden.
                    </li>
                    <li>
                        <b>Interfaces / Port Types:</b> In Java sind wir es gewohnt, dass sich ein Programm aus mehreren Klassen zusammensetzt, in denen die Methoden
                        des Programms enthalten sind. Ein √§hnliches Konzept gibt es auch f√ºr Webservices, wobei hier nicht zwischen Klassen und Objekten unterschieden
                        wird. Stattdessen besitzt jeder Webservice mindestens ein ‚ÄûInterface‚Äù (WSDL 2.0) bzw. ‚ÄûPort Type‚Äù (WSDL 1.1), dem die aufrufbaren Operationen
                        zugewiesen werden. Somit k√∂nnen durch Definition mehrerer Interfaces bzw. Port Types sozusagen Gruppen gebildet werden, die alle Operationen
                        eines Aufgabenbereichs zusammenfassen.
                    </li>
                    <li>
                        <b>Bindings:</b> Last but not least m√ºssen nat√ºrlich noch URL, √úbertragungsprotokoll und Aufrufsemantik¬π des Webservices definiert werden.
                        Dies erfolgt am Ende der WSDL durch das sogenannte ‚ÄûBinding‚Äù, das als eigenst√§ndige Struktur zun√§chst definiert und dann den Interfaces
                        bzw. Port Types zugewiesen wird.
                    </li>
                </ul>
                <p>
                    Ein minimales Beispiel f√ºr eine WSDL-Datei findest du auf den Folien, auch wenn du die XML-Elemente jetzt nicht auswendig lernen musst. üëª
                </p>
                <p>
                    <small>
                        ¬π In der Theorie kennt SOAP noch andere √úbertragungsprotokolle au√üer HTTP, dies wird in der Praxis aber kaum genutzt. Ebenso kennt SOAP
                        noch weitere Aufrufsemantiken, die sich nicht am klassischen Methodenaufruf orientieren, beispielsweise Anfragen ohne Antwort. Dies kommt
                        ab und zu vor, der synchrone Methodenaufruf mit Anfrage und direkter Antwort wird jedoch am h√§ufigsten verwendet.
                    </small>
                </p>
            </aside>
        </section>

        <section>
            <h1>Webservices testen mit SoapUI</h1>
            <article>
                <ul class="dhbw-carousel-links">
                    <li>
                        <a href="#soapui-carousel" role="button" data-slide="next">N√§chstes Bild</a>
                    </li>
                    <li>
                        <a href="#soapui-carousel" role="button" data-slide="prev">Vorheriges Bild</a>
                    </li>
                    <li>
                        <a href="#soapui-carousel" role="button" data-slide-to="0">Nochmal von vorne</a>
                    </li>
                </ul>
                <div id="soapui-carousel" class="carousel slide" style="margin-bottom: 1em;" data-interval="false">
                    <div class="carousel-inner">
                        <div class="carousel-item img-thumbnail active">
                            <p>
                                Angenommen, du hast einen Webservice entwickelt und startest diesen in Netbeans. Dann zeigt Netbeans am Ende
                                des Server-Protokolls die URLs des Webservices an.
                            </p>
                            <img class="active d-block w-100" src="soapui-01.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Wenn du <code>?wsdl</code> an die URLs anh√§ngst, kannst du im Browser die WSDL zu jeder EJB abrufen.
                            </p>
                            <img class="active d-block w-100" src="soapui-02.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                In SoapUI musst du je WSDL ein neues SOAP-Projekt anlegen.
                            </p>
                            <img class="active d-block w-100" src="soapui-03.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Dadurch √∂ffnet sich folgendes Fenster. Kopiere die URL der WSDL hier herein und gib dem Projekt einen Namen.
                            </p>
                            <img class="active d-block w-100" src="soapui-04.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Das neue Projekt taucht dann links in der Baumansicht auf. Anhand der WSDL konnte SoapUI auch bereits die verf√ºgbaren Operationen erkennen.
                            </p>
                            <img class="active d-block w-100" src="soapui-05.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Per Doppelklick auf ein Binding √∂ffnet sich ein Fenster mit allerlei n√ºtzlichen Informationen √ºber den Webservice.
                            </p>
                            <img class="active d-block w-100" src="soapui-06.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Beispielsweise gibt es hier auch einen praktischen WSDL-Viewer, der eine schnelle Navigation innerhalb der WSDL erm√∂glicht.
                            </p>
                            <img class="active d-block w-100" src="soapui-07.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                SoapUI hat bereits zu jeder Operation eine Beispielanfrage generiert, die sich per Doppelklick √∂ffnen l√§sst.
                            </p>
                            <img class="active d-block w-100" src="soapui-08.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                √úber das Kontextmen√º lassen sich noch beliebig weitere Beispielanfragen erzeugen.
                            </p>
                            <img class="active d-block w-100" src="soapui-09.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                So wie diese hier, wo der Parameter <src-code language="xml">&lt;name&gt;Spaceballs&lt;/name&gt;</src-code> an den Webservice √ºbergeben wird. Per Klick
                                auf das gr√ºne Play-Symbol wird die Anfrage abgeschickt.
                            </p>
                            <img class="active d-block w-100" src="soapui-10.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Wenig sp√§ter taucht dann rechts die Antwort auf.
                            </p>
                            <img class="active d-block w-100" src="soapui-11.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                √úber die ‚ÄûRaw‚Äù-Buttons lassen sich die HTTP-Rohdaten der Anfrage und Antwort anzeigen. Dadurch siehst du dann auch die gesendeten Header Fields.
                            </p>
                            <img class="active d-block w-100" src="soapui-12.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Damit endet unsere kleine SoapUI-Tour. Das Tool sollte ein keinem Werkzeugkoffer fehlen. üîß
                            </p>
                            <img class="active d-block w-25 m-auto" src="../../finish.svg" />
                        </div>
                    </div>
                </div>

                <p>
                    <small>
                        <small>
                            Bildnachweis f√ºr das Endesymbol: <a href="https://pixabay.com/en/symbol-gui-internet-internet-page-2480163/" target="_blank">Pixabay: janf93</a>
                        </small>
                    </small>
                </p>
            </article>
            <aside>
                <p>
                    Die einfachste M√∂glichkeit, einen neuen Webservice kennenzulernen oder eigene Webservices zu testen, ist sie
                    mit dem freien Tool <a href="https://www.soapui.org/downloads/soapui.html" target="_blank">SoapUI</a> zu untersuchen.
                    Die nachfolgenden Abbildungen zeigen dir, wir du eine WSDL in SoapUI importieren und die Webserviceaufrufe testen kannst. üî¨
                </p>
                <img src="soap.jpg" alt="" class="d-block img-thumbnail" style="width: 100%;" />
                <p>
                    <small>
                        Bildnachweis:
                        <a href="https://pixabay.com/de/lavendel-seife-handt%C3%BCcher-sch%C3%B6nheit-3066531/" target="_blank">Pixabay: joe137</a>
                    </small>
                </p>
            </aside>
        </section>

        <section data-background-color="rgb(231, 221, 141)">
            <h1>Aufgabe 1: Wir erkunden SoapUI</h1>
            <article>
                <p>
                    Lade dir von Moodle den Beispiel-Webservice herunter und lasse ihn in Netbeans laufen. Anschlie√üend importiere seine beiden
                    WSDLs in SoapUI und erkunde ein wenig die angeboten Operationen, indem du erst die Operation <code>createExampleData</code>
                    des <code>AdminSoapWebservice</code> und dann die anderen Operationen ausf√ºhrst. Vergleiche dabei auch, wie die Attribute
                    der <code>Movie</code> und der <code>Participant</code>-Klassen im XML abgebildet werden.
                </p>
                <img src="aufgabe1.png" alt="Screenshot von SoapUI" class="d-block" style="width: 100%;" />
            </article>
            <aside>
                <p>
                    Da SoapUI so ein praktisches Werkzeug ist, solltest du es gleich mal installieren und ausprobieren. Das Beispielprojekt auf
                    Moodle hilft dir dabei. üíØ
                </p>
            </aside>
        </section>

        <section data-background-color="rgb(231, 221, 141)">
            <h1>Aufgabe 2: Ein kleines Webservice-Quiz</h1>
            <article>
                <h2>Aufgabe 2.1: Allgemeine Fragen</h2>

                <p>
                    a) F√ºr welche typischen Anwendungsf√§lle wird SOAP oft genutzt?
                </p>
                <ol class="dhbw-liste-mit-viel-text">
                    <li>
                        Zur Bereitstellung eines Serverbackends f√ºr clientseitige Webanwendungen
                    </li>
                    <li>
                        Zur Automatisierung unternehmens√ºbergreifender Gesch√§ftsprozesse
                    </li>
                    <li>
                        Zur Interprozesskommunikation mehrerer Programme auf demselben Rechner
                    </li>
                    <li>
                        Zur Kommunikation von IoT-Devices mit einem Server in der Cloud
                    </li>
                    <li>
                        Zur Integration unterschiedlicher Anwendungen verschiedener Hersteller
                    </li>
                </ol>

                <p>
                    b) Webservices besitzen h√§ufig eine HTML-Oberfl√§che.
                </p>
                <ol class="dhbw-liste-mit-viel-text">
                    <li>
                        Wahr
                    </li>
                    <li>
                        Falsch
                    </li>
                </ol>

                <p>
                    c) Welche der folgenden Aussagen stimmt nicht?
                </p>
                <ol class="dhbw-liste-mit-viel-text">
                    <li>
                        Webservices setzen voraus, dass Client und Server in Java geschrieben sind.
                    </li>
                    <li>
                        Webservices nutzen HTTP und andere Webtechniken zum maschinellen Datenaustausch.
                    </li>
                    <li>
                        SOAP-Webservices nutzen dar√ºber hinaus XML als Nachrichtenformat.
                    </li>
                </ol>

                <h2>Aufgabe 2.2: Fragen zur Technik</h2>

                <p>
                    a) Welche Aufgabe erf√ºllt die WSDL eines SOAP-Webservices?
                </p>
                <ol class="dhbw-liste-mit-viel-text">
                    <li>
                        Sie dient als menschenlesbare Dokumentation des Webservices.
                    </li>
                    <li>
                        Sie dient als maschinenlesbare, formale Definition des Webservices.
                    </li>
                    <li>
                        Sie dient als Beispielcode zum Aufruf des Webservices.
                    </li>
                </ol>

                <p>
                    b) Welche der folgenden WSDL-Versionen werden von Java unterst√ºtzt?
                </p>
                <ol class="dhbw-liste-mit-viel-text">
                    <li>
                        WSDL 1.1
                    </li>
                    <li>
                        WSDL 2.0
                    </li>
                </ol>

                <p>
                    c) Welche Aufgabe erf√ºllen die Port Types bzw. Interfaces einer WSDL?
                </p>
                <ol class="dhbw-liste-mit-viel-text">
                    <li>
                        Sie definieren die Struktur der ausgetauschten XML-Nachrichten.
                    </li>
                    <li>
                        Sie definieren die Namen aller vorhandenen Operationen.
                    </li>
                    <li>
                        Sie fassen mehrere  Operationen zusammen und weisen ihnen XML-Nachrichten zu.
                    </li>
                    <li>
                        Sie definieren das Transportprotokoll und die URL des Webservices.
                    </li>
                </ol>

                <p>
                    d) Welche HTTP-Verben kann ein Client zum Aufruf eines SOAP-Webservices verwenden?
                </p>
                <ol class="dhbw-liste-mit-viel-text">
                    <li>
                        GET, PUT, POST oder DELETE, je nach aufgerufener Operation
                    </li>
                    <li>
                        Nur GET und POST
                    </li>
                    <li>
                        Nur POST und DELETE
                    </li>
                    <li>
                        Nur GET
                    </li>
                    <li>
                        Nur POST
                    </li>
                    <li>
                        Nur PUT
                    </li>
                </ol>

                <p>
                    e) Welches Beispiel entspricht am ehestem dem Aufbau einer SOAP-Nachricht?
                </p>
                <ol class="dhbw-liste-mit-viel-text">
                    <li>
                        <source-code language="xml">
                            &lt;soap:Envelope xmlns:soap="‚Ä¶"&gt;
                                &lt;soap:HeaderFields&gt;
                                    ‚Ä¶
                                &lt;/soap:HeaderFields&gt;
                                &lt;soap:BodyContent&gt;
                                    ‚Ä¶
                                &lt;/soap:BodyContent&gt;
                            &lt;/soap:Envelope&gt;
                        </source-code>
                    </li>
                    <li>
                        <source-code language="xml">
                            &lt;soap:Soap xmlns:soap="‚Ä¶"&gt;
                                &lt;soap:head&gt;
                                    ‚Ä¶
                                &lt;/soap:head&gt;
                                &lt;soap:body&gt;
                                    ‚Ä¶
                                &lt;/soap:body&gt;
                            &lt;/soap:Soap&gt;
                        </source-code>
                    </li>
                    <li>
                        <source-code language="xml">
                            &lt;soap:Envelope xmlns:soap="‚Ä¶"&gt;
                                &lt;soap:Header&gt;
                                    ‚Ä¶
                                &lt;/soap:Header&gt;
                                &lt;soap:Body&gt;
                                    ‚Ä¶
                                &lt;/soap:Body&gt;
                            &lt;/soap:Envelope&gt;
                        </source-code>
                    </li>
                </ol>

                <hr />

                <p style="width: 100%; transform: scaleY(-1) scaleX(-1); display: inline-block;">
                    <small>
                        <b>L√∂sung:</b> Aufgabe 2.1: 2 + 5, 2, 1<br />
                        Aufgabe 2.2: 2, beide, 3, 5, 3
                    </small>
                </p>
            </article>
            <aside>
                <p>
                    Gleich wagen wir uns an die Programmierung heran. Zuvor haben wir hier aber noch ein
                    paar Fragen f√ºr dich vorbereitet. üéôÔ∏è
                </p>
            </aside>
        </section>

        <!--
            =========================
            SOAP-WEBSERVICES MIT JAVA
            =========================
        -->
        <section data-chapter data-background-image="../../trennfolie.jpg">
            <h1>SOAP-Webservices mit Java</h1>
            <article>
                <small>
                    <small>
                        Bildnachweis:
                        <a href="https://pixabay.com/en/adult-break-business-caucasian-2398561/" target="_blank">Pixabay: rawpixel</a>
                    </small>
                </small>
            </article>
        </section>

        <section>
            <h1>Eigene Webservices definieren</h1>
            <article>
                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "eigene_ws-vorgehen-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#eigene_ws-vorgehen"
                                role          = "tab"
                                aria-controls = "eigene_ws-vorgehen"
                                aria-expanded = "true"
                            >
                                Allgemeines Vorgehen
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "eigene_ws-annotationen-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#eigene_ws-annotationen"
                                role          = "tab"
                                aria-controls = "eigene_ws-annotationen"
                            >
                                Ben√∂tigte Annotationen
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "eigene_ws-beispiel-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#eigene_ws-beispiel"
                                role          = "tab"
                                aria-controls = "eigene_ws-beispiel"
                            >
                                Beispiel
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Allgemeines Vorgehen -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "eigene_ws-vorgehen"
                            role            = "tabpanel"
                            aria-labelledby = "eigene_ws-vorgehen-tab"
                        >
                            <div class="container-fluid">
                                <!-- Allgemeine Hinweise -->
                                <div class="row">
                                    <div class="col-md">
                                        <table style="margin-bottom: 1em">
                                            <tr>
                                                <td style="padding-right: 0.5em">
                                                    ‚òÄÔ∏è
                                                </td>
                                                <td>
                                                    F√ºr die Entwicklung von SOAP-Webservices werden in Java die JAX-WS-Klassen verwendet.
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding-right: 0.5em">
                                                    ‚òÄÔ∏è
                                                </td>
                                                <td>
                                                    Serverseitig muss hierf√ºr nur eine Stateless Session Bean mit weiteren Annotationen ausgestattet werden.
                                                </td>
                                            </tr>
                                            <tr>
                                                <td style="padding-right: 0.5em">
                                                    ‚òÄÔ∏è
                                                </td>
                                                <td>
                                                    Clientseitig l√§sst sich der ben√∂tigte Quellcode anhand der WSDL automatisch generieren.
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>

                                <!-- Serverseitig -->
                                <div class="row">
                                    <div class="col">
                                        <h2>Definition des Webservices auf Serverseite</h2>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <img src="code-first.jpg" alt="" class="d-block img-thumbnail" style="width: 100%;" />
                                    </div>
                                    <div class="col-md-8">
                                        <p>
                                            <b>Code First:</b> Eine bestehende Javaklasse wird durch Annotationen zu einem Webservice ausgebaut. Java erzeugt automatisch eine dazu passende WSDL.
                                            Hierf√ºr kann das Kommandozeilenwerkzeug <code>wsgen</code> bzw. die in Netbeans enthaltene GUI verwendet werden. Durch Anh√§ngen von <code>?wsdl</code>
                                            an die Webservice-URL l√§sst sich diese jedoch auch zur Laufzeit abrufen.
                                        </p>
                                        <img src="jaxws-code-first.svg" alt="Aufruf von wsgen f√ºr Code-First-Ansatz" class="d-block" style="width: 100%;" />
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <img src="contract-first.jpg" alt="" class="d-block img-thumbnail" style="width: 100%;" />
                                    </div>
                                    <div class="col-md-8">
                                        <p>
                                            <b>Contract First:</b> Das serverseitige Codeger√ºst wird anhand einer vorhandenen WSDL generiert. Die WSDL wird hierf√ºr mit dem Werkzeugprogramm
                                            <code>wsimport</code> bzw. der in Netbeans enthaltenen GUI eingelesen und verarbeitet.
                                        </p>
                                        <img src="jaxws-contract-first.svg" alt="Aufruf von wsimport f√ºr Contract-First-Ansatz" class="d-block" style="width: 100%;" />
                                    </div>
                                </div>

                                <!-- Clientseitig -->
                                <div class="row">
                                    <div class="col">
                                        <h2>Verwendung des Webservices auf Clientseite</h2>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md-4">
                                        <img src="clientseitig.jpg" alt="" class="d-block img-thumbnail" style="width: 100%;" />
                                    </div>
                                    <div class="col-md-8">
                                        <p>
                                            S√§mtliche ben√∂tigten Klassen lassen sich mit <code>wsimport</code> bzw. der GUI in Netbeans generieren. Auf der <a href="#11">√ºbern√§chsten Folie</a>
                                            schauen wir uns das genauer an. Hier geht es zun√§chst noch nur darum, die Serverseite zu programmieren.
                                        </p>
                                        <img src="jaxws-clientseitig.svg" alt="Aufruf von wsimport zur Generierung der Clientklassen" class="d-block" style="width: 100%;" />
                                    </div>
                                </div>

                                <!-- Bildnachweise -->
                                <div class="row">
                                    <div class="col-md">
                                        <small>
                                            <small>
                                                Bildnachweise:
                                                <a href="https://pixabay.com/de/java-software-softwareentwicklung-2327538/" target="_blank">Pixabay: b1-foto</a>,
                                                <a href="https://pixabay.com/de/unternehmen-unterschrift-vertrag-962358/" target="_blank">Pixabay: edar</a>,
                                                <a href="https://pixabay.com/de/verschiedene-nationalit%C3%A4ten-kinder-1743392/" target="_blank">Pixabay: Alexas_Fotos</a>
                                            </small>
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Ben√∂tigte Annotationen -->
                        <div
                            class           = "tab-pane fade"
                            id              = "eigene_ws-annotationen"
                            role            = "tabpanel"
                            aria-labelledby = "eigene_ws-annotationen-tab"
                        >
                            <div class="container-fluid">
                                <div class="row">
                                    <div class="col-md">
                                        <h3 class="dhbw-lightblue">@WebService</h3>
                                        <p>
                                            Kennzeichnet eine <b>√∂ffentliche, nicht-abstrakte Klasse</b> mit <b>√∂ffentlichem und parameterlosen Konstruktor</b> als Webserviceimplementierung.
                                        </p>
                                    </div>
                                    <div class="col-md">
                                        <h3 class="dhbw-lightblue">@WebMethod</h3>
                                        <p>
                                            Markiert eine <b>√∂ffentliche, nicht-statische Methode</b>, um sie √ºber den Webservices aufrufbar zu machen.
                                        </p>
                                    </div>
                                </div>
                                <div class="row">
                                    <div class="col-md">
                                        <h3 class="dhbw-lightblue">@WebParam</h3>
                                        <p>
                                            Kennzeichnet einen Methodenparameter und legt fest, wie er im XML √ºbergeben werden muss, z.B. wie das dazugeh√∂rige XML-Element hei√üen muss.
                                        </p>
                                    </div>
                                    <div class="col-md">
                                        <h3 class="dhbw-lightblue">@WebResult</h3>
                                        <p>
                                            Steht vor einer Methode und legt fest, welchen Namen das XML-Element besitzt, in dem der R√ºckgabewert an den Aufrufer gesendet wird.
                                        </p>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md">
                                        <table style="margin-bottom: 1em;">
                                            <tr>
                                                <td style="padding-right: 0.5em;">
                                                    <img src="hinweis.png" alt="Hinweis" class="d-block" style="width: 6em;" />
                                                </td>
                                                <td>
                                                    JAX-WS k√ºmmert sich automatisch um die Konvertierung der Methodenparameter und R√ºckgabewerte von und nach XML.
                                                    Dabei k√∂nnen auch komplexe Objekte nach XML und zur√ºck umgewandelt werden.
                                                </td>
                                            </tr>
                                        </table>
                                    </div>
                                </div>

                                <div class="row">
                                    <div class="col-md">
                                        <small>
                                            <small>
                                                Bildnachweis:
                                                <a href="https://pixabay.com/de/post-it-notiz-memo-papier-1495148/" target="_blank">Pixabay: Alexandra_Koch</a>
                                            </small>
                                        </small>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <!-- Beispiel -->
                        <div
                            class           = "tab-pane fade"
                            id              = "eigene_ws-beispiel"
                            role            = "tabpanel"
                            aria-labelledby = "eigene_ws-beispiel-tab"
                        >
                        <p>
                            Innerhalb der Jakarta Enterprise Edition d√ºrfen nur <b>Stateless Session Beans</b> als Webservice gekennzeichnet werden.
                            Es empfiehlt sich dabei, immer eine eigene EJB nur f√ºr den Webservice zu definieren, anstatt einfach die ohnehin schon
                            vorhandenen EJBs zum Webservice zu machen. Dadurch hat man eine klarere Trennung und l√§uft nicht Gefahr, zu viele
                            Methoden entfernt aufrufbar zu machen. So wie im nachfolgenden Beispiel, das einen Webservice zur Verwaltung von
                            Zirkusvorstellungen definiert. üé™
                        </p>
                        <source-code language="java">
                            /**
                             * Zugrunde liegende EJB zur Verwaltung von Spielorten.
                             * Hier nutzen wir die EntityBean aus dem JPA-Kapitel.
                             */
                            @Stateless
                            public class LocationBean extends EntityBean&lt;Location, Long&gt; {

                                public LocationBean() {
                                    super(Location.class);
                                }
                            }

                            /**
                             * Zugrunde liegende EJB zur Verwaltung von Vorstellungen.
                             * Nutzt ebenfalls die EntityBean aus dem JPA-Kapitel.
                             */
                            @Stateless
                            public class GigBean extends EntityBean&lt;Gig, Long&gt; {

                                public GigBean() {
                                    super(Gig.class);
                                }
                            }

                            /**
                             * Und hier nun der eigentliche Webservice. Entfernte Clients k√∂nnen nur
                             * seine Methoden aufrufen und somit zum Beispiel keine √Ñnderungen an den
                             * Daten vornehmen.
                             */
                            @Stateless
                            @WebService
                            public class CircusWebservice {

                                @EJB
                                private LocationBean locationBean;

                                @EJB
                                private GigBean gigBean;

                                public CircusWebservice() {
                                }

                                @WebMethod
                                @WebResult(name="location")
                                public List&lt;Location&gt; getAllLocations() {
                                    return this.locationBean.findAll();
                                }

                                @WebMethod
                                @WebResult(name="gig")
                                public List&lt;Gig&gt; getAllGigs() {
                                    return this.gigBean.findAll();
                                }

                                @WebMethod
                                @WebResult(name="gig")
                                public Gig getGigDetails(@WebParam(name="id") long id) {
                                    return this.gigBean.findById(id);
                                }
                            }
                        </source-code>
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <p>
                    Mit Java einen eigenen Webservice zu programmieren ist eigentlich nicht schwer. Es ist sogar ziemlich einfach,
                    da wir nur ein paar einfache Handgriffe mit den Werkzeugen <code>wsgen</code> und <code>wsimport</code>
                    erledigen m√ºssen. Doch selbst diese kann Netbeans f√ºr uns automatisieren. Zuvor muss nat√ºrlich klar sein, was
                    f√ºr ein Webservice entwickelt werden soll und welches Vorgehen daf√ºr in Frage kommt:
                </p>
                <ul>
                    <li>
                        <b>Code First:</b> So handhaben wir es in der Vorlesung, da es weniger Arbeit macht. Wir schreiben einfach
                        eine Javaklasse und lassen uns daraus den Webservice und seine WSDL generieren.
                    </li>
                    <li>
                        <b>Contract First:</b> So w√ºrde man es h√§ufig in der Praxis machen, wenn man den Webservice versionieren und
                        sicherstellen will, dass er sich zwischen zwei Versionen nicht inkompatibel √§ndert. In diesem Fall w√ºrden
                        wir die WSDL von Hand schreiben und dann mit <code>wsimport</code> passende Webservice-Klassen generieren lassen.
                    </li>
                </ul>
                <p>
                    Code First ist dabei wirklich bequem. Wir m√ºssen uns um so gut wie nichts k√ºmmern. Nicht einmal das Programm
                    <code>wsgen</code> m√ºssen wir aufrufen, da sich die WSDL durch Anh√§ngen von <code>?wsdl</code> an die Webservice-URL
                    ohnehin jederzeit frisch abrufen l√§sst. Alles was wir wirklich brauchen ist eine <b>Stateless Session Bean</b> und
                    <b>vier grundlegende Annotationen</b> aus der JAX-WS-Bibliothek. Schon haben wir einen Webservice.
                </p>
                <ul>
                    <li>
                        <src-code language="java">@WebService</src-code>: Diese Annotation muss vor der Klasse stehen, um sie als Webservice auszuzeichnen.
                    </li>
                    <li>
                        <src-code language="java">@WebMethod</src-code>: Mindestens eine Methode der Klasse muss mit dieser Annotation in den
                        Webservice aufgenommen werden. √úber den Webservice k√∂nnen n√§mlich nur die mit <src-code>@WebMethod</src-code> gekennzeichneten
                        Methoden aufgerufen werden.
                    </li>
                    <li>
                        <src-code language="java">@WebParam(name = "‚Ä¶")</src-code>: Die n√§chsten beiden Annotationen werden streng genommen gar nicht ben√∂tigt, sollten
                        aber trotzdem immer verwendet werden. Denn Java verliert beim Compilieren einer Klasse die Namen ihrer Methodenparameter, wodurch die Parameter
                        im XML nur durchnummeriert werden k√∂nnen. Mit <src-code language="java">@WebParam</src-code> k√∂nnen wir sicherstellen, dass auch im XML ein
                        sprechender Name verwendet wird. Zus√§tzlich kann hier festgelegt werden, ob der Parameter im SOAP-Body (Vorgabe) oder im SOAP-Header
                        (nur bei <src-code language="java">header = true</src-code>) √ºbergeben wird.
                    </li>
                    <li>
                        <src-code language="java">@WebResult</src-code>: Mit dieser Annotation legst du fest, wie das XML-Element f√ºr den R√ºckgabewert einer Methode
                        in der Antwort hei√üen soll. Die Annotation muss daher genau wie <src-code language="java">@WebbMethod</src-code> direkt vor einer
                        Methode stehen.
                    </li>
                </ul>
                <p>
                    Ein Beispiel hierf√ºr findest du im letzten Reiter auf der Folie. Dort siehst du auch, wie die Webservice-EJB
                    im Hintergrund auf zwei weitere EJBs zugreift, um die fachliche Logik von der Webservice-Definition zu trennen.
                    Das solltest du in deinen eigenen Projekten sp√§ter genau so handhaben, weil du sonst keine Kontrolle dar√ºber
                    hast, welche Operationen der Webservice bietet und welche Methoden nur f√ºr den internen Gebrauch (nicht √ºber
                    den Webservice) zur Verf√ºgung stehen.
                </p>
            </aside>
        </section>

        <section>
            <h1>Ein Wort zur Sicherheit</h1>
            <article>
                <div class="container-fluid">
                    <!-- Allgemeine Hinweise -->
                    <div class="row">
                        <div class="col-md">
                            <img src="sicherheit1.jpg" alt="" class="d-block img-thumbnail" style="width: 100%;" />
                            Ein Webservice sollte immer mit einer Benutzer- und Berechtigungspr√ºfung ausgestattet sein,
                            um unberechtigte Zugriffe zu verhindern.
                        </div>
                        <div class="col-md">
                            <img src="sicherheit2.jpg" alt="" class="d-block img-thumbnail" style="width: 100%;" />
                            Die Konfiguration h√§ngt allerdings vom jeweiligen Applikationsserver ab und bestimmte
                            Dinge sind im Standard gar nicht vorgesehen.
                        </div>
                        <div class="col-md">
                            <img src="sicherheit3.jpg" alt="" class="d-block img-thumbnail" style="width: 100%;" />
                            F√ºr SOAP ist es daher am einfachsten sich nicht auf den Server zu verlassen,
                            sondern alles selbst zu programmieren.
                        </div>
                    </div>

                    <!-- Quellcode -->
                    <div class="row">
                        <div class="col-md">
                            <div>
                                <ul class="nav nav-tabs" role="tablist">
                                    <li class="nav-item">
                                        <a
                                            id            = "sicherheit-webservice-tab"
                                            class         = "nav-link active"
                                            data-toggle   = "tab"
                                            href          = "#sicherheit-webservice"
                                            role          = "tab"
                                            aria-controls = "sicherheit-webservice"
                                            aria-expanded = "true"
                                        >
                                            Webservice-Klasse
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a
                                            id            = "sicherheit-user_bean-tab"
                                            class         = "nav-link"
                                            data-toggle   = "tab"
                                            href          = "#sicherheit-user_bean"
                                            role          = "tab"
                                            aria-controls = "sicherheit-user_bean"
                                        >
                                            User-Bean
                                        </a>
                                    </li>
                                    <li class="nav-item">
                                        <a
                                            id            = "sicherheit-user_entity-tab"
                                            class         = "nav-link"
                                            data-toggle   = "tab"
                                            href          = "#sicherheit-user_entity"
                                            role          = "tab"
                                            aria-controls = "sicherheit-user_entity"
                                        >
                                            User-Entity
                                        </a>
                                    </li>
                                </ul>
                                <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                                    <!-- Webservice-Klasse -->
                                    <div
                                        class           = "tab-pane fade show active"
                                        id              = "sicherheit-webservice"
                                        role            = "tabpanel"
                                        aria-labelledby = "sicherheit-webservice-tab"
                                    >
                                        <p>
                                            Der folgende Webservice besitzt zwei Operationen: Eine, mit der ein neuer Benutzer angelegt werden
                                            kann und eine weitere, die bereits einen g√ºltigen Benutzer verlangt. Beide Operationen greifen auf
                                            eine EJB namens <code>UserBean</code> zu, um einen Benutzer anzulegen bzw. seine Zugangsdaten zu
                                            pr√ºfen. Die Clou ist dabei die Methode <code>userBean.validateUser()</code>, die eine Exception wirft,
                                            wenn die Zugangsdaten nicht stimmen oder wenn dem Benutzer nicht die erforderliche Benutzergruppe
                                            zugewiesen wurde.
                                        </p>
                                        <source-code language="java">
                                            @Stateless
                                            @WebService
                                            public class SOAPAuthBeispielWebservice {

                                                @EJB
                                                private UserBean userBean;

                                                /**
                                                 * Neuen Benutzer registrieren. Geht nat√ºrlich, ohne sich zuvor zu
                                                 * authentifizieren. :-) Die Felder "username" und "password" werden
                                                 * hierf√ºr im SOAP-Body √ºbertragen.
                                                 */
                                                @WebMethod
                                                @WebResult(name = "status")
                                                public String signup(
                                                        @WebParam(name = "username") String username,
                                                        @WebParam(name = "password") String password)
                                                        throws UserBean.UserAlreadyExistsException {

                                                    this.userBean.signup(username, password, "soap-user");
                                                    return "OK";
                                                }

                                                /**
                                                 * Beispiel f√ºr eine gesch√ºtzte Methode. Erfordert, dass der Client im
                                                 * SOAP-Header die Felder "username" und "password" sendet.
                                                 */
                                                @WebMethod
                                                @WebResult(name = "message")
                                                public String getSecretMessage(
                                                        @WebParam(name = "username", header = true) String username,
                                                        @WebParam(name = "password", header = true) String password)
                                                        throws UserBean.InvalidCredentialsException,
                                                               UserBean.AccessRestrictedException {

                                                    // Wirft eine Exception, wenn der Benutzer nicht berechtigt ist
                                                    this.userBean.validateUser(username, password, "soap-user");

                                                    // Der gesch√ºtzte Code, den nicht jeder ausf√ºhren darf
                                                    return "Streng geheim! For your eyes only!";
                                                }

                                            }
                                        </source-code>
                                    </div>
                                    <!-- User-Bean -->
                                    <div
                                        class           = "tab-pane fade"
                                        id              = "sicherheit-user_bean"
                                        role            = "tabpanel"
                                        aria-labelledby = "sicherheit-user_bean-tab"
                                    >
                                        <p>
                                            Die <code>UserBean</code> beinhaltet die beiden Methoden zum Anlegen eines Benutzers und zum √úberpr√ºfen
                                            seiner Berechtigungen. Intern greift die Klasse hierf√ºr auf eine Persistence Entity zu. Am Ende der
                                            Klasse befinden sich die Exceptions, die bei ung√ºltigen Zugangsdaten geworfen werden.
                                        </p>
                                        <source-code language="java">
                                            @Stateless
                                            public class UserBean {

                                                @PersistenceContext
                                                protected EntityManager em;

                                                /**
                                                 * Registrieren eines neuen Benutzers
                                                 */
                                                public void signup(String username, String password, String... groups)
                                                        throws UserAlreadyExistsException {

                                                    // Sicherstellen, dass es den Benutzer noch nicht gibt
                                                    if (em.find(User.class, username) != null) {
                                                        throw new UserAlreadyExistsException("Der Benutzername existiert bereits.");
                                                    }

                                                    // Neuen Benutzer erzeugen
                                                    User user = new User(username, password);

                                                    for (String group : groups) {
                                                        user.addToGroup(group);
                                                    }

                                                    em.persist(user);
                                                }

                                                /**
                                                 * Anmeldedaten eines Benutzers sowie Benutzergruppenzuordnung und Zugeh√∂rigkeit
                                                 * zu einer der √ºbergebenen Benutzergruppen pr√ºfen.
                                                 */
                                                public User validateUser(String username, String password, String... groups)
                                                        throws InvalidCredentialsException, AccessRestrictedException {

                                                    // Benutzer suchen und Passwort pr√ºfen
                                                    User user = em.find(User.class, username);
                                                    boolean authorize = false;

                                                    if (user == null || !user.checkPassword(password)) {
                                                        throw new InvalidCredentialsException("Benutzername oder Passwort falsch.");
                                                    }

                                                    // Zugeordnete Benutzergruppen pr√ºfen, mindestens eine muss vorhanden sein
                                                    for (String group : groups) {
                                                        if (user.groups.contains(group)) {
                                                            authorize = true;
                                                            break;
                                                        }
                                                    }

                                                    if (!authorize) {
                                                        throw new AccessRestrictedException("Sie sind hierf√ºr nicht berechtigt.");
                                                    }

                                                    // Alles okay!
                                                    return user;
                                                }

                                                //&lt;editor-fold defaultstate="collapsed" desc="Exceptions"&gt;
                                                /**
                                                 * Fehler: Der Benutzername ist bereits vergeben.
                                                 */
                                                public class UserAlreadyExistsException extends Exception {

                                                    public UserAlreadyExistsException(String message) {
                                                        super(message);
                                                    }
                                                }

                                                /**
                                                 * Fehler: Anmeldedaten des Benutzers stimmen nicht
                                                 */
                                                public class InvalidCredentialsException extends Exception {
                                                    ‚Ä¶
                                                }

                                                /**
                                                 * Fehler: Benutzer besitzt nicht die erforderliche Benutzergruppe.
                                                 */
                                                public class AccessRestrictedException extends Exception {
                                                    ‚Ä¶
                                                }
                                                //&lt;/editor-fold&gt;

                                            }
                                        </source-code>
                                    </div>
                                    <!-- User-Entity -->
                                    <div
                                        class           = "tab-pane fade"
                                        id              = "sicherheit-user_entity"
                                        role            = "tabpanel"
                                        aria-labelledby = "sicherheit-user_entity-tab"
                                    >
                                        <p>
                                            Der Benutzer selbst ist eine einfache Persistence Entity, wobei hier ein paar Besonderheiten ber√ºcksichtigt werden,
                                            wie zum Beispiel, dass das Passwort nur als Hashwert gespeichert wird. Dementsprechend gibt es weiter unten ein
                                            paar Hilfsmethoden zum √Ñndern und Pr√ºfen des Passworts.
                                        </p>
                                        <source-code language="java">
                                            @Entity
                                            @Table(name = "SOAP_USER")
                                            public class User implements Serializable {

                                                private static final char[] HEX_ARRAY = "0123456789ABCDEF".toCharArray();

                                                @Id
                                                @Column(name = "USERNAME", length = 64)
                                                private String username;

                                                @Column(name = "PASSWORD_HASH", length = 64)
                                                private String passwordHash;

                                                @ElementCollection
                                                @CollectionTable(
                                                        name = "SOAP_USER_GROUP",
                                                        joinColumns = @JoinColumn(name = "USERNAME")
                                                )
                                                @Column(name = "GROUPNAME")
                                                List&lt;String&gt; groups = new ArrayList&lt;&gt;();

                                                //&lt;editor-fold defaultstate="collapsed" desc="Konstruktoren"&gt;
                                                public User() {
                                                }

                                                public User(String username, String password) {
                                                    this.username = username;
                                                    this.passwordHash = this.hashPassword(password);
                                                }
                                                //&lt;/editor-fold&gt;

                                                //&lt;editor-fold defaultstate="collapsed" desc="Setter und Getter"&gt;
                                                public String getUsername() {
                                                    return username;
                                                }

                                                public void setUsername(String id) {
                                                    this.username = id;
                                                }
                                                //&lt;/editor-fold&gt;

                                                //&lt;editor-fold defaultstate="collapsed" desc="Passwort setzen und pr√ºfen"&gt;
                                                /**
                                                 * Berechnet der Hash-Wert zu einem Passwort.
                                                 */
                                                 private String hashPassword(String password) {
                                                    byte[] hash;

                                                    if (password == null) {
                                                        password = "";
                                                    }

                                                    // Hashwert zum Passwort berechnen
                                                    try {
                                                        MessageDigest digest = MessageDigest.getInstance("SHA-256");
                                                        hash = digest.digest(password.getBytes(StandardCharsets.UTF_8));
                                                    } catch (NoSuchAlgorithmException ex) {
                                                        hash = "!".getBytes(StandardCharsets.UTF_8);
                                                    }

                                                    // Hashwert in einen Hex-String umwandeln
                                                    // Vgl. https://stackoverflow.com/a/9855338
                                                    char[] hashHex = new char[hash.length * 2];

                                                    for (int i = 0; i &lt; hash.length; i++) {
                                                        int v = hash[i] & 0xFF;
                                                        hashHex[i * 2] = HEX_ARRAY[v &gt;&gt;&gt; 4];
                                                        hashHex[i * 2 + 1] = HEX_ARRAY[v & 0x0F];
                                                    }

                                                    return new String(hashHex);
                                                }

                                                /**
                                                 * Berechnet einen Hashwert aus dem √ºbergebenen Passwort und legt ihn im
                                                 * Feld passwordHash ab. Somit wird das Passwort niemals als Klartext
                                                 * gespeichert.
                                                 *
                                                 * Gleichzeitig wird das Passwort im nicht gespeicherten Feld password
                                                 * abgelegt, um durch die Bean Validation Annotationen √ºberpr√ºft werden
                                                 * zu k√∂nnen.
                                                 */
                                                public void setPassword(String password) {
                                                    this.passwordHash = this.hashPassword(password);
                                                }

                                                /**
                                                 * Pr√ºft, ob das √ºbergebene Passwort korrekt ist.
                                                 */
                                                public boolean checkPassword(String password) {
                                                    return this.passwordHash.equals(this.hashPassword(password));
                                                }
                                                //&lt;/editor-fold&gt;

                                                //&lt;editor-fold defaultstate="collapsed" desc="Zuordnung zu Benutzergruppen"&gt;
                                                /**
                                                 * @return Eine unver√§nderliche Liste aller Benutzergruppen
                                                 */
                                                public List&lt;String&gt; getGroups() {
                                                    List&lt;String&gt; groupsCopy = new ArrayList&lt;&gt;();

                                                    this.groups.forEach((groupname) -&gt; {
                                                        groupsCopy.add(groupname);
                                                    });

                                                    return groupsCopy;
                                                }

                                                /**
                                                 * F√ºgt den Benutzer einer weiteren Benutzergruppe hinzu.
                                                 */
                                                public void addToGroup(String groupname) {
                                                    if (!this.groups.contains(groupname)) {
                                                        this.groups.add(groupname);
                                                    }
                                                }

                                                /**
                                                 * Entfernt den Benutzer aus der √ºbergebenen Benutzergruppe.
                                                 */
                                                public void removeFromGroup(String groupname) {
                                                    this.groups.remove(groupname);
                                                }
                                                //&lt;/editor-fold&gt;

                                            }
                                        </source-code>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Bildnachweise -->
                    <div class="row">
                        <div class="col-md">
                            <small>
                                <small>
                                    Bildnachweise:
                                    <a href="https://pixabay.com/de/immobilien-sicherheit-haus-home-2734564/" target="_blank">Pixabay: freeGraphicToday</a>,
                                    <a href="https://pixabay.com/de/schuh-stiefel-haus-stiefelhaus-1519809/" target="_blank">Pixabay: susannp4</a>,
                                    <a href="https://pixabay.com/de/diy-heimwerken-reparaturen-hobby-617763/" target="_blank">Pixabay: stevepb</a>
                                </small>
                            </small>
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <p>
                    Einen kleinen Nachteil haben Webservices mit Java ja doch: Wenn man sich nicht um ihre Absicherung k√ºmmert, stehen
                    sie sperrangelweit offen und k√∂nnen von beliebigen Personen nah und fern aufgerufen werden. üòÆ Manchmal ist das gewollt,
                    in der Regel wird man den Aufruf aber auf berechtigte Benutzer beschr√§nken wollen. Oft soll sogar f√ºr jede einzelne
                    Methode unterschieden werden, welche Benutzer sie aufrufen d√ºrfen. Fr√ºher oder sp√§ter muss daher eine Benutzer- und
                    Berechtigungsverwaltung her. üìá Bekannterma√üen wird in diesem Zusammenhang ja zwischen <b>Authentifizierung</b> und
                    <b>Autorisierung</b> unterschieden, wobei erstes nur die Pr√ºfung der Logindaten¬π und zweites die Pr√ºfung der
                    Berechtigungen¬≤ beschreibt. F√ºr beide Sachen hat Jakarta&nbsp;EE eine L√∂sung parat, doch wie sich zeigt, kann diese
                    mit SOAP nicht immer sinnvoll genutzt werden.
                </p>
                <p>
                    <small>
                        ¬π <i>Wer ist das √ºberhaupt?</i> <br />
                        ¬≤ <i>Was darf er/sie denn?</i>
                    </small>
                </p>
                <p>
                    Ganz unabh√§ngig von Java kommen prinzipiell zwei Verfahren in Betracht, wie sich ein Benutzer an einem SOAP-Webservice
                    authentifizieren kann. Beide Verfahren sind in der Praxis h√§ufig anzutreffen:
                </p>
                <table style="margin-bottom: 1em">
                    <tr>
                        <td style="padding-right: 0.5em;">
                            üìù
                        </td>
                        <td>
                            <b>Authentifizierung auf Protokollebene:</b> F√ºr dieses Verfahren schreibt HTTP verschiedene M√∂glichkeiten
                            vor, wie Benutzername und Passwort in den Kopdaten einer HTTP-Anfrage an den Server geschickt werden k√∂nnen.
                            In der Regel pr√ºft der Webserver die Anmeldedaten dann schon, bevor die Anfrage √ºberhaupt an den eigentlichen
                            Webservice √ºbergeben wird und antwortet im Fehlerfall mit genau definierten HTTP-Statuscodes (z.B. mit
                            <i>403 Forbidden</i>). H√§ufige √úbertragungsarten sind hier
                            <a href="https://de.wikipedia.org/wiki/HTTP-Authentifizierung#Basic_Authentication" target="_blank">HTTP Basic Auth</a> und
                            <a href="https://de.wikipedia.org/wiki/HTTP-Authentifizierung#Digest_Access_Authentication" target="_blank">HTTP Digest Auth</a>.
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-right: 0.5em;">
                            üìù
                        </td>
                        <td>
                            <b>Authentifizierung auf Anwendungsebene:</b> Alternativ kann auch die Anwendung selbst die Anmeldedaten
                            des Benutzers pr√ºfen. Hierf√ºr schreibt der Webservice einfach vor, dass Benutzername und Passwort
                            (oder jede beliebigen anderen Felder, die einen Benutzer identifizieren) als Teil der SOAP-Anfrage im
                            XML-Datenstrom mitgesendet werden m√ºssen. Es obliegt dann dem (Java)Code des Webservices, die Anmeldedaten zu
                            pr√ºfen.
                        </td>
                    </tr>
                </table>
                <p>
                    Das erste Verfahren hat folgende Vorteile:
                </p>
                <table style="margin-bottom: 1em">
                    <tr>
                        <td style="padding-right: 0.5em;">
                            ‚ò∫Ô∏è
                        </td>
                        <td>
                            Es m√ºssen keine Vorkehrungen im Quellcode getroffen werden, au√üer dass die Annotation <src-code language="java">@RolesAllowed("‚Ä¶")</src-code>
                            vor die zu sch√ºtzenden Klassen oder Methoden geschrieben werden muss.
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-right: 0.5em;">
                            ‚ò∫Ô∏è
                        </td>
                        <td>
                            Das Verfahren wird von allen Clients unterst√ºtzt, da es integraler Bestandteil des HTTP-Protokolls ist.
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-right: 0.5em;">
                            ‚ò∫Ô∏è
                        </td>
                        <td>
                            Der Applikationsserver kann neben den Anmeldedaten auch gleich die Berechtigungen des Benutzers pr√ºfen.
                        </td>
                    </tr>
                </table>
                <p>
                    Leider hat es aber auch ein paar ganz entscheidende Nachteile, die den Einsatz eigentlich verbieten:
                </p>
                <table style="margin-bottom: 1em">
                    <tr>
                        <td style="padding-right: 0.5em;">
                            üôÑ
                        </td>
                        <td>
                            Die Konfiguration erfolgt f√ºr jeden Applikationsserver unterschiedlich. Jeder Hersteller macht andere Vorgaben,
                            wie das Verfahren konfiguriert werden muss, meistens in Form einer speziellen XML-Datei im Quellcode der Anwendung.
                            Leider gibt es h√§ufig keine gute oder aktuelle Dokumentation dazu.
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-right: 0.5em;">
                            üôÑ
                        </td>
                        <td>
                            Einige Applikationsserver liefern keine saubere Fehlermeldung, wenn ein Client ung√ºltige Anmeldedaten sendet.
                            Anstelle einer maschinenlesbaren Antwort im SOAP-XML-Format wird h√§ufig eine HTML-Seite gesendet, was bei einem
                            SOAP-Webservice eigentlich v√∂llig Banane ist. üçå
                        </td>
                    </tr>
                    <tr>
                        <td style="padding-right: 0.5em;">
                            üôÑ
                        </td>
                        <td>
                            Der Glassfish-Server, den wir in der Vorlesung inzwischen nicht mehr verwenden, liefert sogar noch mit
                            <i>500 Server Error</i> einen komplett falschen Statuscode, der eigentlich f√ºr ein komplett anderes
                            Problem im Server oder im Quellcode steht.
                    </tr>
                </table>
                <p>
                    Bleibt also nur das andere Verfahren, bei dem Benutzername und Passwort in der SOAP-Nachricht (meistens im SOAP-Header)
                    stehen, als vern√ºnftige L√∂sung. Das funktioniert soweit auch ganz gut, hat aber einen anderen Pferdefu√ü: üêé Es gibt in
                    Jakarta&nbsp;EE keinerlei Methoden, mit der die empfangenen Logindaten an den Applikationsserver zur Pr√ºfung √ºbergeben
                    werden k√∂nnen. Was man auch versucht, es gibt sie einfach nicht. Und das schon seit Jahren, wenn nicht Jahrzehnten! üìÜ
                </p>
                <p>
                    Die beste L√∂sung ist daher, seine eigene, kleine Benutzerverwaltung zu programmieren. Ein Minimalbeispiel dazu findest du
                    auf der Folie.
                </p>
            </aside>
        </section>

        <section>
            <h1>Fremde Webservices aufrufen</h1>
            <article>
                <ul class="dhbw-carousel-links">
                    <li>
                        <a href="#aufruf-carousel" role="button" data-slide="next">N√§chstes Bild</a>
                    </li>
                    <li>
                        <a href="#aufruf-carousel" role="button" data-slide="prev">Vorheriges Bild</a>
                    </li>
                    <li>
                        <a href="#aufruf-carousel" role="button" data-slide-to="0">Nochmal von vorne</a>
                    </li>
                </ul>
                <div id="aufruf-carousel" class="carousel slide" style="margin-bottom: 1em;" data-interval="false">
                    <div class="carousel-inner">
                        <div class="carousel-item img-thumbnail active">
                            <p>
                                Als Beispiel soll der Filmwebservice von <a href="#5">Folie 5</a> herhalten. üé• Er muss in Netbeans ausgef√ºhrt werden.
                            </p>
                            <img class="active d-block w-100" src="aufruf-01.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Den Aufruf packen wir in eine neue Anwendung, f√ºr die du ein neues Projekt anlegen musst.
                            </p>
                            <img class="active d-block w-100" src="aufruf-02.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Und zwar vom Typ ‚ÄûJava Application‚Äù, da wir ein ganz einfaches Kommandozeilenprogramm schreiben wollen.
                            </p>
                            <img class="active d-block w-100" src="aufruf-03.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Dieses Fenster kennst du ja schon. Trage einen sinnvollen Namen ein und klicke auf ‚ÄûFinish‚Äù.
                            </p>
                            <img class="active d-block w-100" src="aufruf-04.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Dadurch legt Netbeans ein neues Projekt an, das am Anfang nat√ºrlich noch komplett leer ausschaut. ü•õ
                            </p>
                            <img class="active d-block w-100" src="aufruf-05.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Jetzt wird es spannend: Wir ben√∂tigen einen neuen ‚ÄûWeb Service Client‚Äù.
                            </p>
                            <img class="active d-block w-100" src="aufruf-06.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                In diesem Fenster musst du dann angeben, wo sich die WSDL befindet. Im Screenshot haben wir einfach ihre URL hinterlegt,
                                was du so auch im echten Leben tun solltest. Denn so kannst du die Client-Klassen jederzeit auffrischen lassen, wenn sich
                                die WSDL einmal √§ndert.
                            </p>
                            <img class="active d-block w-100" src="aufruf-07.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Wow! Alle diese Klassen hat Netbeans (oder besser gesagt das Tool <code>wsimport</code>) f√ºr uns generiert. Man stelle sich
                                vor, wir h√§tten die alle von Hand schreiben m√ºssen ‚Ä¶ üòÆ
                            </p>
                            <img class="active d-block w-100" src="aufruf-08.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Hier nun der komplette Quellcode f√ºr unser neues Programm. Die ersten f√ºnf Zeilen der <code>main()</code>-Methode sind
                                hier die entscheidenden. Die Klassen <code>Soap</code> und <code>MovieSoapWebservice</code> hei√üen f√ºr jeden Webservice
                                anders. Hast du aber erst einmal die richtigen, geht der eigentliche Aufruf ganz einfach. üç≠
                            </p>
                            <source-code language="java">
                                package dhbwka.wwi.versys.javaee.soap_client_beispiel;

                                import dhbwka.wwi.vertsys.javee.soap_server_beispiel.Movie;
                                import dhbwka.wwi.vertsys.javee.soap_server_beispiel.MovieSoapWebservice;
                                import dhbwka.wwi.vertsys.javee.soap_server_beispiel.Soap;
                                import java.util.List;

                                /**
                                 * Mini-Beispiel zum Aufruf eines SOAP-Webservices. Damit das funktioniert, muss
                                 * im Hintergrund das Projekt "SOAP_Server_Beispiel" ausgef√ºhrt werden.
                                 */
                                public class Main {

                                    public static void main(String[] args) {
                                        // Stub-Objekt zum entfernten Aufruf erstellen
                                        Soap soap = new Soap();
                                        MovieSoapWebservice movieWs = soap.getMovieSoapWebservicePort();

                                        // Webservice-Operation "findAll" aufrufen
                                        List&lt;Movie&gt; allMovies = movieWs.findAll();

                                        // Abgerufenes Ergebnis anzeigen
                                        System.out.println("========================");
                                        System.out.println("Die gro√üe SOAP-Videothek");
                                        System.out.println("========================");
                                        System.out.println();

                                        for (Movie movie : allMovies) {
                                            System.out.println("Name:         " + movie.getName());
                                            System.out.println("Beschreibung: " + movie.getDescription());
                                            System.out.println("Jahr:         " + movie.getReleaseYear());
                                            System.out.println();
                                        }
                                    }
                                }
                            </source-code>
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Das Ergebnis unserer M√ºhen. Es hat geklappt. Der Webservice l√§sst sich tats√§chlich aufrufen. ü•≥
                            </p>
                            <img class="active d-block w-100" src="aufruf-09.png" />
                        </div>
                        <div class="carousel-item img-thumbnail">
                            <p>
                                Na, das war doch mal einfach. Bis auf die zwei Klassennamen, die man immer etwas suchen muss,
                                war das doch echt nicht schwer. Und es funktioniert nat√ºrlich auch in jeder anderen Art von
                                Java-Anwendung, also zum Beispiel auch in einer Jakarta-EE-Webanwendung.
                                <span style="font-weight: bold; color: green; text-shadow: 1px 1px 1px rgba(0,0,0,0.5)">‚úîÔ∏è</span>
                            </p>
                            <img class="active d-block w-25 m-auto" src="../../finish.svg" />
                        </div>
                    </div>
                </div>

                <p>
                    <small>
                        <small>
                            Bildnachweis f√ºr das Endesymbol: <a href="https://pixabay.com/en/symbol-gui-internet-internet-page-2480163/" target="_blank">Pixabay: janf93</a>
                        </small>
                    </small>
                </p>
            </article>
            <aside>
                <p>
                    Fremde SOAP-Webservices aufzurufen ist fast genauso leicht, wie einen eigenen Webservice zu entwickeln, wenn man
                    die WSDL-Beschreibung des Webservices vorliegen hat. Die Bilder auf der Folie zeigen dir, wie du eine WSDL in
                    Netbeans importieren kannst und welchen Code du dann schreiben musst. üñºÔ∏è
                </p>
            </aside>
        </section>

        <section data-background-color="rgb(231, 221, 141)">
            <h1>Aufgabe 3: Eine kleine Seifenoper</h1>
            <article>
                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "aufgabe3-aufgabe-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#aufgabe3-aufgabe"
                                role          = "tab"
                                aria-controls = "aufgabe3-aufgabe"
                                aria-expanded = "true"
                            >
                                Aufgabe
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "aufgabe3-loesung-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#aufgabe3-loesung"
                                role          = "tab"
                                aria-controls = "aufgabe3-loesung"
                            >
                                L√∂sung
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Aufgabe -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "aufgabe3-aufgabe"
                            role            = "tabpanel"
                            aria-labelledby = "aufgabe3-aufgabe-tab"
                        >
                            <p>
                                Was liegt n√§her, als mit SOAP eine Daily Soap zu programmieren? üíò Du wei√üt schon, diese t√§glichen Serien im Vorabendprogramm,
                                die sich immer um den Alltag derselben Personen drehen. üíë Hierf√ºr haben wir auf Moodle eine Vorlage mit dem Datenmodell
                                vorbereitet. Lade diese herunter und importiere sie in Netbeans.
                            </p>
                            <p>
                                a) In der Vorlage ist bereits eine Klasse namens <code>AdminWebservice</code> mit der Methode <code>createExampleData</code>
                                enthalten. Vervollst√§ndige die Methode so, dass weitere Datens√§tze f√ºr Personen und Beziehungen in der Datenbank abgelegt werden.
                            </p>
                            <p>
                                b) Schreibe eine neue Klasse namens <code>SeifenoperWebservice</code>, die einen SOAP-Webservice mit folgenden Operationen anbietet:
                            </p>
                            <ul>
                                <li>
                                    <src-code language="java">List&lt;Person&gt; findAllPersonen()</src-code>
                                </li>
                                <li>
                                    <src-code language="java">List&lt;Beziehung&gt; findBeziehungByPerson(Person person)</src-code>
                                </li>
                                <li>
                                    <src-code language="java">Beziehung saveNewBeziehung(Beziehung beziehung)</src-code>
                                </li>
                                <li>
                                    <src-code language="java">Beziehung updateBeziehung(Beziehung beziehung)</src-code>
                                </li>
                            </ul>
                            <p>
                                Nutze die vorgegebenen Methoden der <code>PersonBean</code> und <code>BeziehungBean</code> zum Ausprogrammieren der Methoden.
                                Achte dabei darauf, dass die Methodenparameter und R√ºckgabewerte sprechende Namen im XML erhalten.
                            </p>
                            <img src="aufgabe3.png" alt="Screenshot des Webservices in SoapUI" class="d-block" style="width: 100%;" />
                        </div>
                        <!-- L√∂sung -->
                        <div
                            class           = "tab-pane fade"
                            id              = "aufgabe3-loesung"
                            role            = "tabpanel"
                            aria-labelledby = "aufgabe3-loesung-tab"
                        >
                            <h2>Admin-Webservice</h2>
                            <source-code language="java">
                                @Stateless
                                @WebService(serviceName = "seifenoper")
                                public class AdminWebservice {

                                    @EJB
                                    private BeziehungBean beziehungBean;

                                    @EJB
                                    private PersonBean personBean;

                                    @WebMethod
                                    @WebResult(name = "status")
                                    public String createExampleData() throws ParseException {
                                        // Alte Eintr√§ge komplett l√∂schen
                                        for (Beziehung beziehung : this.beziehungBean.findAll()) {
                                            this.beziehungBean.delete(beziehung);
                                        }

                                        for (Person person : this.personBean.findAll()) {
                                            this.personBean.delete(person);
                                        }

                                        // Neue Personen anlegen
                                        Person joeCool = new Person("Joe Cool", 1983, Geschlecht.MAENNLICH,
                                                "Der Schwarm aller Frauen");
                                        this.personBean.saveNew(joeCool);

                                        Person gerdFlei√üig = new Person("Gerd Flei√üig", 1971, Geschlecht.MAENNLICH,
                                                "Ist mit seiner Arbeit verheiratet");
                                        this.personBean.saveNew(gerdFlei√üig);

                                        Person juliaHofer = new Person("Julia Hofer", 1982, Geschlecht.WEIBLICH,
                                                "War mal mit Gerd zusammen");
                                        this.personBean.saveNew(juliaHofer);

                                        ‚Ä¶

                                        // Neue Beziehungen anlegen
                                        SimpleDateFormat sdf = new SimpleDateFormat("yyyy-M-dd");
                                        Beziehung beziehung;

                                        beziehung = new Beziehung(joeCool, juliaHofer, sdf.parse("2016-12-03"), false,
                                                "Haben sich auf dem Weihnachtsmarkt kennengelernt");
                                        this.beziehungBean.saveNew(beziehung);

                                        beziehung = new Beziehung(gerdFlei√üig, juliaHofer, sdf.parse("1996-04-21"),
                                                sdf.parse("2001-10-10"), false, "Haben zusammen studiert");
                                        this.beziehungBean.saveNew(beziehung);

                                        ‚Ä¶

                                        // Status zur√ºckgeben
                                        return "OK";
                                    }
                                }
                            </source-code>

                            <h2>Seifenoper-Webservice</h2>
                            <source-code language="java">
                                @Stateless
                                @WebService(serviceName = "seifenoper")
                                public class SeifenoperWebservice {

                                    @EJB
                                    private BeziehungBean beziehungBean;

                                    @EJB
                                    private PersonBean personBean;

                                    @WebMethod
                                    @WebResult(name = "person")
                                    public List&lt;Person&gt; findAllPersonen() {
                                        return this.personBean.findAll();
                                    }

                                    @WebMethod
                                    @WebResult(name = "beziehung")
                                    public List&lt;Beziehung&gt; findBeziehungByPerson(@WebParam(name = "personId") long personId) {
                                        Person person = this.personBean.findById(personId);
                                        return this.beziehungBean.findByPerson(person);
                                    }

                                    @WebMethod
                                    @WebResult(name = "beziehung")
                                    public Beziehung saveNewBeziehung(@WebParam(name = "beziehung") Beziehung beziehung) {
                                        return this.beziehungBean.saveNew(beziehung);
                                    }

                                    @WebMethod
                                    @WebResult(name = "beziehung")
                                    public Beziehung updateBeziehung(@WebParam(name = "beziehung") Beziehung beziehung) {
                                        return this.beziehungBean.update(beziehung);
                                    }
                                }
                            </source-code>
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <p>
                    Zum Abschluss des Kapitels kannst du hier deinen ersten, eigenen Webservice schreiben.
                    Nichts Besonderes. Du solltest aber mal alle Schritte von der Anlage des neuen Projekts
                    √ºber das Ausprogrammieren der Klassen bis zum Test mit SoapUI einmal durchlaufen, bevor
                    es mit der Vorlesung weiter geht. üèá
                </p>
                <img src="../../github_atom.png" class="img-fluid d-block"/>
                <p>
                    <small>
                        Bildnachweis:
                        <a href="https://atom.io/" target="_blank">Atom Webseite</a>
                    </small>
                </p>
            </aside>
        </section>

        <section data-background-color="rgb(231, 221, 141)">
            <h1>Aufgabe 4: Ein kleines JAX-WS-Quiz</h1>
            <article>
                <div>
                    <ul class="nav nav-tabs" role="tablist">
                        <li class="nav-item">
                            <a
                                id            = "aufgabe4-allgemeines-tab"
                                class         = "nav-link active"
                                data-toggle   = "tab"
                                href          = "#aufgabe4-allgemeines"
                                role          = "tab"
                                aria-controls = "aufgabe4-allgemeines"
                                aria-expanded = "true"
                            >
                                Allgemeine Fragen
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "aufgabe4-java2xml1-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#aufgabe4-java2xml1"
                                role          = "tab"
                                aria-controls = "aufgabe4-java2xml1"
                            >
                                Java zu XML (Aufgabe)
                            </a>
                        </li>
                        <li class="nav-item">
                            <a
                                id            = "aufgabe4-java2xml2-tab"
                                class         = "nav-link"
                                data-toggle   = "tab"
                                href          = "#aufgabe4-java2xml2"
                                role          = "tab"
                                aria-controls = "aufgabe4-java2xml2"
                            >
                                Java zu XML (L√∂sung)
                            </a>
                        </li>
                    </ul>
                    <div class="tab-content border border-top-0 bg-white" style="padding: 1em;">
                        <!-- Allgemeine Fragen -->
                        <div
                            class           = "tab-pane fade show active"
                            id              = "aufgabe4-allgemeines"
                            role            = "tabpanel"
                            aria-labelledby = "aufgabe4-allgemeines-tab"
                        >
                            <p>
                                a) Was bedeutet das Vorgehen ‚ÄûContract First‚Äù f√ºr die Entwicklung von SOAP-Webservices?
                            </p>
                            <ol class="dhbw-liste-mit-viel-text">
                                <li>
                                    Ausgehend von einer als Webservice deklarierten Javaklasse wird eine WSDL-Datei generiert.
                                </li>
                                <li>
                                    Ausgehend von einer auf anderem Wege erstellten WSDL wird das Codeger√ºst in Java generiert.
                                </li>
                            </ol>

                            <p>
                                b) Welche Annotation zeichnet eine Klasse als Webservices aus?
                            </p>
                            <ol class="dhbw-liste-mit-viel-text">
                                <li>
                                    <code>@SOAPBinding</code>
                                </li>
                                <li>
                                    <code>@WebResult</code>
                                </li>
                                <li>
                                    <code>@WebService</code>
                                </li>
                                <li>
                                    <code>@WebMethod</code>
                                </li>
                            </ol>

                            <p>
                                c) Welche Annotation zeichnet eine Methode als Webservice-Operation aus?
                            </p>
                            <ol class="dhbw-liste-mit-viel-text">
                                <li>
                                    <code>@WebserviceContext</code>
                                </li>
                                <li>
                                    <code>@WebOperation</code>
                                </li>
                                <li>
                                    <code>@PortType</code>
                                </li>
                                <li>
                                    <code>@WebMethod</code>
                                </li>
                            </ol>

                            <p>
                                d) Welche Annotation legt den Namen eines Methodenparameters fest?
                            </p>
                            <ol class="dhbw-liste-mit-viel-text">
                                <li>
                                    <code>@WebParam</code>
                                </li>
                                <li>
                                    <code>@WebResult</code>
                                </li>
                                <li>
                                    <code>@Remote</code>
                                </li>
                                <li>
                                    <code>@Parameter</code>
                                </li>
                            </ol>

                            <p>
                                e) Welche M√∂glichkeiten bietet Jakarta&nbsp;EE zur Erstellung eines Webservices?
                            </p>
                            <ol class="dhbw-liste-mit-viel-text">
                                <li>
                                    Ein Servlet kann durch Annotationen zu einem SOAP-Webservice umgewandelt werden.
                                </li>
                                <li>
                                    Eine beliebige Enterprise Java Bean kann durch Annotationen zu einem Webservice erweitert werden.
                                </li>
                                <li>
                                    Eine Stateful Session Bean kann durch Vererbung zu einer Webservice-Implementierung gemacht werden.
                                </li>
                                <li>
                                    Eine Stateless Session Bean kann Teile ihrer Methoden als Webservice zur Verf√ºgung stellen.
                                </li>
                            </ol>

                            <p>
                                f) Welches Werkzeug dient der Generierung von Javacode anhand einer WSDL?
                            </p>
                            <ol class="dhbw-liste-mit-viel-text">
                                <li>
                                    <code>wsgen</code>
                                </li>
                                <li>
                                    <code>wsimport</code>
                                </li>
                                <li>
                                    <code>javac</code>
                                </li>
                                <li>
                                    <code>soapui</code>
                                </li>
                            </ol>

                            <hr />

                            <p style="width: 100%; transform: scaleY(-1) scaleX(-1); display: inline-block;">
                                <small>
                                    <b>L√∂sung:</b> 2, 3, 4, 1, 4, 2
                                </small>
                            </p>
                        </div>
                        <!-- Java zu XML (Aufgabe) -->
                        <div
                            class           = "tab-pane fade"
                            id              = "aufgabe4-java2xml1"
                            role            = "tabpanel"
                            aria-labelledby = "aufgabe4-java2xml1-tab"
                        >
                            <p>
                                Gegeben sind folgende Webservice-Klassen. Schreibe das XML f√ºr eine beispielhafte SOAP-Anfrage sowie
                                eine Antwort mit mindestens zwei Suchergebnissen.
                            </p>
                            <source-code language="java">
                                @Stateless
                                @WebService
                                public class FilmDatenbank {
                                    @WebMethod
                                    @WebResult(name="film")
                                    List&lt;Film&gt; sucheFilm(@WebParam(name="query") String q) {
                                        ‚Ä¶
                                    }
                                }

                                @Entity
                                public class Film {
                                    @Id
                                    @GeneratedValue(strategy = GenerationType.TABLE, generator = "film_ids")
                                    @TableGenerator(name = "film_ids", initialValue = 0, allocationSize = 50)
                                    private long id = 0L;

                                    private String name = "";
                                    private int jahr = 0;

                                    // Konstruktoren ‚Ä¶

                                    // Setter und Getter ‚Ä¶
                                }
                            </source-code>
                        </div>
                        <!-- Java zu XML (L√∂sung) -->
                        <div
                            class           = "tab-pane fade"
                            id              = "aufgabe4-java2xml2"
                            role            = "tabpanel"
                            aria-labelledby = "aufgabe4-java2xml2-tab"
                        >
                            <source-code language="xml">
                                &lt;!-- SOAP-Anfrage --&gt;
                                &lt;soap:Envelope xmlns:soap="‚Ä¶"&gt;
                                    &lt;soap:Header /&gt;
                                    &lt;soap:Body&gt;
                                        &lt;sucheFilm&gt;
                                            &lt;query&gt;Bibi und Tina&lt;/query&gt;
                                        &lt;/sucheFilm&gt;
                                    &lt;/soap:Body&gt;
                                &lt;/soap:Envelope&gt;

                                &lt;!-- SOAP-Antwort --&gt;
                                &lt;soap:Envelope xmlns:soap="‚Ä¶"&gt;
                                    &lt;soap:Header /&gt;
                                    &lt;soap:Body&gt;
                                        &lt;sucheFilmResponse&gt;
                                            &lt;film&gt;
                                                &lt;name&gt;Bibi auf Weltreise&lt;/name&gt;
                                                &lt;jahr&gt;1991&lt;/jahr&gt;
                                            &lt;/film&gt;
                                            &lt;film&gt;
                                                &lt;name&gt;Tinas Abenteuer&lt;/name&gt;
                                                &lt;jahr&gt;1993&lt;/jahr&gt;
                                            &lt;/film&gt;
                                        &lt;/sucheFilmResponse&gt;
                                    &lt;/soap:Body&gt;
                                &lt;/soap:Envelope&gt;
                            </source-code>
                        </div>
                    </div>
                </div>
            </article>
            <aside>
                <p>
                    Jetzt hast du es gleich geschafft. Das Kapitel ist bald vorbei. Nur noch ein paar Fragen zur
                    Kontrolle beantworten und schon kann es auf zu neuen Ufern gehen. ‚õµ
                </p>
            </aside>
        </section>

        <!--
            ====================
            HINWEISE ZUM SCHLUSS
            ====================
        -->
        <section data-chapter data-background-image="../../trennfolie.jpg">
            <h1>Hinweise zum Schluss</h1>
            <article>
                <small>
                    <small>
                        Bildnachweis:
                        <a href="https://pixabay.com/en/adult-break-business-caucasian-2398561/" target="_blank">Pixabay: rawpixel</a>
                    </small>
                </small>
            </article>
        </section>

        <section data-background-color="rgb(153, 190, 137)">
            <h1>Do &amp; Don't</h1>
            <article>
                <h4>Definition eines Webservices</h4>
                <ul>
                    <li>
                        Vermeide Namenskollisionen mit den Webservices anderer Anwendungen auf demselben Server.
                    </li>
                    <li>
                        √úberlege dir bei Entities und tief geschachtelten Objekten, ob du wirklich alle Daten √ºbertragen willst.
                    </li>
                    <li>
                        Schreibe deshalb auch abgespeckte Datentransferklassen f√ºr die wirklich zu √ºbertragenden Daten.
                    </li>
                    <li>
                        Keine Methode mit R√ºckgabewert ohne die Annotation <src-code language="java">@WebResult(name="‚Ä¶")</src-code>!
                    </li>
                    <li>
                        Kein Methodenparameter ohne <src-code language="java">@WebParam(name="‚Ä¶")</src-code>!
                    </li>
                    <li>
                        Verschiebe allgemeine Parameter wie Benutzername und Passwort in den SOAP-Header.
                    </li>
                    <li>
                        Teile einen Webservice in mehrere EJBs auf, um eine sinnvolle Strukturierung zu erhalten.
                    </li>
                </ul>

                <h4>Sicherheit</h4>
                <ul>
                    <li>
                        Sichere deine Webservices mit einer Benutzer- und Rechteverwaltung ab.
                    </li>
                    <li>
                        Dokumentiere f√ºr deine Clients, wie sie sich am Webservice authentifizieren k√∂nnen.
                    </li>
                    <li>
                        Vermeide die Jakarta-EE-Funktionen zur Rechteverwaltung, da diese mit SOAP nicht gut funktionieren.
                    </li>
                    <li>
                        Verwende zur √úbertragung immer das verschl√ºsselte HTTPS-Protokoll.
                    </li>
                    <li>
                        √úberlege dir, den Inhalt der SOAP-Nachrichten zu signieren und zu verschl√ºsseln (Stichwort: WS-SEC).
                    </li>
                    <li>
                        Mache niemals eine ohnehin schon vorhandene EJB zum Webservice. G√∂nne jedem Webservices seine pers√∂nliche Klasse.
                    </li>
                </ul>

                <h4>Betrieb eines Webservices</h4>
                <ul>
                    <li>
                        Richte ein Monitoring und ein Logging f√ºr den Webservice ein.
                    </li>
                    <li>
                        Speichere alle SOAP-Anfragen und Antworten f√ºr eine Weile, damit sie f√ºr Fehlersuchen zur Verf√ºgung stehen.
                    </li>
                    <li>
                        Behalte aber nicht zu viele SOAP-Nachrichten, da dies Speicher belegt und dem Datenschutz entgegen steht.
                    </li>
                    <li>
                        Erstelle eine ausgiebige Dokumentation des Webservices, in der alle Operationen genaustens erkl√§rt werden.
                    </li>
                    <li>
                        √úberlege dir, den Webservice zu versionieren. Stelle dabei aber auch die Verf√ºgbarkeit alter Versionen sicher.
                    </li>
                </ul>

                <h4>Aufruf fremder Webservices</h4>
                <ul>
                    <li>
                        Importiere die WSDL immer anhand ihrer entfernten URL und nicht als lokal gespeicherte Datei.
                    </li>
                    <li>
                        Bevorzuge wenige gro√üe Aufrufe mit vielen Daten gegen√ºber vielen kleinen Aufrufen mit wenig Daten.
                    </li>
                </ul>
            </article>
            <aside>
                <p>
                    Das ist er: <a href="https://de.wikipedia.org/wiki/%C3%9Cber_den_Umgang_mit_Menschen" target="_blank">Der Knigge</a> f√ºr Java. üìò
                    Auf dieser Folie haben wir ein paar allgemeine Tipps zusammengestellt, worauf du bei der Entwicklung von SOAP-Webservices achten solltest.
                </p>
                <img src="../../do-dont.svg" class="d-block" style="width: 20em; max-width: 100%; margin-bottom: 0.5em;" />
                <p>
                    <small>
                        Bildnachweis:
                        <a href="https://pixabay.com/en/dialog-tip-advice-hint-speaking-148815/" target="_blank" style="color: rgb(25, 68, 49);">Pixabay: OpenClipart-Vectors</a>
                    </small>
                </p>
            </aside>
        </section>

        <section data-background-color="rgb(158, 203, 231)">
            <h1>Rechtshinweise</h1>
            <article>
                <h4>Creative Commons Namensnennung 4.0 International</h4>
                <ul>
                    <li>Beliebiges Teilen ist erlaubt</li>
                    <li>Die Unterlagen d√ºrfen bearbeitet und ver√§ndert werden</li>
                    <li>Wenn die Namens- und Urheberangaben erhalten bleiben</li>
                    <li>Und keine weiteren Einschr√§nkungen auferlegt werden</li>
                </ul>
                <span style="font-size: 400px; color: white;" class="dhbw-text-shadow" >¬ß</span>
            </article>
            <aside style="font-size: 80%">
                <h4>Kontaktdaten</h4>
                <p>
                    Dennis Schulmeister-Zimolong<br/>
                    E-Mail: <a data-email-address>dhbw windows3.de</a><br/>
                </p>

                <h4>Urheberrecht und Lizenzvereinbarung</h4>
                <p>
                    ¬© 2018 ‚Äì 2019 Dennis Schulmeister-Zimolong im Auftrag der DHBW Karlsruhe<br/>
                    <a href="https://github.com/DennisSchulmeister/dhbwka-wwi-vertsys-folien" target="_blank">https://github.com/DennisSchulmeister/dhbwka-wwi-vertsys-folien</a>
                </p>
                <img src="https://i.creativecommons.org/l/by/4.0/88x31.png" alt="Creative Commons Lizenzvertrag" />
                <p>
                    Das Werk <i>Vorlesung "Verteilte Systeme" im Studiengang Wirtschaftsinformatik an der DHBW Karlsruhe</i>
                    von <a href="http://www.wpvs.de" target="_blank">Dennis Schulmeister-Zimolong im Auftrag der Dualen Hochschule
                    Baden-W√ºrttemberg Karlsruhe</a> ist lizenziert unter
                    <a href="http://creativecommons.org/licenses/by/4.0/" target="_blank"><i>Creative Commons Namensnennung 4.0 International</i></a>.
                </p>
                <p>
                    Du darfst:
                </p>
                <ul>
                    <li>
                        <b>Teilen</b> ‚Äî das Material in jedwedem Format oder Medium vervielf√§ltigen
                        und weiterverbreiten
                    </li>
                    <li>
                        <b>Bearbeiten</b> ‚Äî das Material remixen, ver√§ndern und darauf aufbauen
                        und zwar f√ºr beliebige Zwecke, sogar kommerziell.
                    </li>
                </ul>
                <p>
                    Unter folgenden Bedingungen:
                </p>
                <ul>
                    <li>
                        <b>Namensnennung</b> ‚Äî Du musst angemessene Urheber- und Rechteangaben
                        machen, einen Link zur Lizenz beif√ºgen und angeben, ob √Ñnderungen
                        vorgenommen wurden. Diese Angaben d√ºrfen in jeder angemessenen Art
                        und Weise gemacht werden, allerdings nicht so, dass der Eindruck
                        entsteht, der Lizenzgeber unterst√ºtze gerade dich oder deine Nutzung
                        besonders.
                    </li>
                    <li>
                        <b>Keine weiteren Einschr√§nkungen</b> ‚Äî Du darfst keine zus√§tzlichen Klauseln
                        oder technische Verfahren einsetzen, die anderen rechtlich irgendetwas
                        untersagen, was die Lizenz erlaubt.
                    </li>
                </ul>
                <p>
                    Es werden keine Garantien gegeben und auch keine Gew√§hr geleistet.
                    Die Lizenz verschafft dir m√∂glicherweise nicht alle Erlaubnisse,
                    die du f√ºr die jeweilige Nutzung brauchst. Es k√∂nnen beispielsweise
                    andere Rechte wie Pers√∂nlichkeits- und Datenschutzrechte zu beachten
                    sein, die deine Nutzung des Materials entsprechend beschr√§nken.
                </p>
                <p>
                    <i>
                        Die Erstellung dieser Unterlagen wurde in den Jahren 2017 und 2018 durch
                        das Projekt ‚ÄûDigiTransMoBiL ‚Äì Gestaltungskompetenzen f√ºr die Digitale
                        Transformation durch Modulbausteine mit innovativen Lehrinhalten und
                        Lehrmethoden‚Äù gef√∂rdert.
                    </i>
                </p>
            </aside>
        </section>
    </body>
</html>
